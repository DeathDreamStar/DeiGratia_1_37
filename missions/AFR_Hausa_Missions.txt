#First slot
hau_cities_mission_slot = {
	slot = 1
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Origins"
	}
	potential = {
		has_dlc = "Origins"
		NOT = { map_setup = map_setup_random }
		OR = {
			tag = SOK
			tag = HAU
			primary_culture = hausa
		}
	}
	has_country_shield = yes

	hau_build_armies = {
		icon = mission_kon_conquer_ckw
		required_missions = {  } 
		position = 1
		provinces_to_highlight = {
		}
		trigger = {
			army_size_percentage = 1
		}
		effect = {
			define_advisor = {
				type = commandant
				discount = yes
				skill = 1
			}
			if = {
				limit = {
					mission_completed = hau_gather_allies
				}
				custom_tooltip = hausa_claims_tt
				hidden_effect = {
					niger_region = {
						limit = {
							culture = hausa
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				custom_tooltip = hau_build_armies_ct
			}
		}
	}

	hau_the_yoruba_and_nupe = {
		icon = mission_kon_conquer_ksj
		required_missions = { hau_unite_the_cities } 
		position = 3
		provinces_to_highlight = {
			OR = {
				area = northern_nupe_area
				area = lower_niger_area
				area = eastern_oyo_area
				area = western_oyo_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			northern_nupe_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lower_niger_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			eastern_oyo_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_oyo_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			benin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			benin_coast_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hau_gain_sea_access = {
		icon = mission_ne_great_lakes_conquest
		required_missions = { hau_the_yoruba_and_nupe } 
		position = 5
		provinces_to_highlight = {
			OR = {
				area = benin_area
				area = benin_coast_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			benin_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			benin_coast_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			any_owned_province = {
				has_port = yes
			}
		}
		effect = {
			add_navy_tradition = 20
			random_owned_province = {
				limit = {
					has_port = yes
				}
				add_unit_construction = {
					type = light_ship
					amount = 6
					speed = 0.1
					cost = 0
				}
			}
		}
	}
}

#Second slot
hau_conquest_mission_slot = {
	slot = 2
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Origins"
	}
	potential = {
		has_dlc = "Origins"
		NOT = { map_setup = map_setup_random }
		OR = {
			tag = SOK
			tag = HAU
			primary_culture = hausa
		}
	}
	has_country_shield = yes

	hau_unite_the_cities = {
		icon = mission_zim_strong_rulership
		required_missions = { 
			hau_build_armies
			hau_gather_allies
		} 
		position = 2
		provinces_to_highlight = {
			NOT = { owned_by = ROOT }
			OR = {
				area = hausa_area
				area = zazzau_area
				area = gobir_area
				area = katsina_area
			}
		}
		trigger = {
			OR = {
				tag = SOK
				tag = HAU
			}
		}
		effect = {
			add_country_modifier = {
				name = hau_city_builders
				duration = 9125
			}
			northern_nupe_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lower_niger_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			eastern_oyo_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			western_oyo_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			bornu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			goure_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hau_resolve_internal_issues = {
		icon = mission_son_military_expertise
		required_missions = { hau_unite_the_cities } 
		position = 4
		provinces_to_highlight = {}
		trigger = {
			stability = 2
			OR = {
				monthly_adm = 10
				monthly_dip = 10
				monthly_mil = 10
			}
			OR = {
				estate_loyalty = {
					estate = estate_church
					loyalty = 70
				}
				NOT = { has_estate = estate_church }
			}
			OR = {
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 70
				}
				NOT = { has_estate = estate_nobles }
			}
			OR = {
				estate_loyalty = {
					estate = estate_burghers
					loyalty = 70
				}
				NOT = { has_estate = estate_burghers }
			}
		}
		effect = {
			1148 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
			1149 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
			1154 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
			1155 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
			2279 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
			2280 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
			2281 = {
				ipe_add_base_tax_1 = yes
				ipe_add_base_production_1 = yes
				ipe_add_base_manpower_1 = yes
			}
		}
	}

	hau_contact_with_the_fulani = {
		icon = mission_mal_west_african_great_power
		required_missions = {  } 
		position = 5
		provinces_to_highlight = {
			OR = {
				AND = {
					NOT = { owned_by = ROOT }
					culture = fulani
				}
				AND = {
					has_discovered = ROOT
					owner = { primary_culture = fulani }
				}
			}
		}
		trigger = {
			OR = {
				any_owned_province = {
					culture = fulani
				}
				any_country = {
					primary_culture = fulani
					has_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
		effect = {
			country_event = {
				id = flavor_hau.5
			}
		}
	}
}

#Third slot
hau_unification_mission_slot = {
	slot = 3
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Origins"
	}
	potential = {
		has_dlc = "Origins"
		NOT = { map_setup = map_setup_random }
		OR = {
			tag = SOK
			tag = HAU
			primary_culture = hausa
		}
	}
	has_country_shield = yes

	hau_gather_allies = {
		icon = mission_mal_fighting_musa
		required_missions = {  } 
		position = 1
		provinces_to_highlight = {
		}
		trigger = {
			num_of_allies = 2
		}
		effect = {
			if = {
				limit = {
					mission_completed = hau_build_armies
				}
				custom_tooltip = hausa_claims_tt
				hidden_effect = {
					niger_region = {
						limit = {
							culture = hausa
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				custom_tooltip = hau_gather_allies_ct
			}
		}
	}

	hau_the_kanuri_threat = {
		icon = mission_kon_conquer_kub
		required_missions = { hau_unite_the_cities } 
		position = 3
		provinces_to_highlight = {
			OR = {
				area = bornu_area
				area = goure_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			bornu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			goure_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			east_azbin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			azbin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hau_the_tuareg = {
		icon = mission_bedouins
		required_missions = { hau_the_kanuri_threat } 
		position = 5
		provinces_to_highlight = {
			OR = {
				area = east_azbin_area
				area = azbin_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
				is_empty = yes
			}
		}
		trigger = {
			east_azbin_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					is_empty = yes
				}
			}
			azbin_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					is_empty = yes
				}
			}
		}
		effect = {
			add_prestige = 25
		}
	}
}

#Fourth slot
hau_jiihad_mission_slot = {
	slot = 4
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Origins"
	}
	potential = {
		has_dlc = "Origins"
		NOT = { map_setup = map_setup_random }
		tag = SOK
	}
	has_country_shield = yes

	hau_prepare_the_jihad = {
		icon = mission_mal_jihad_upon_own_population
		required_missions = {} 
		position = 1
		provinces_to_highlight = {}
		trigger = {
			inquisitor = 3
			OR = {
				full_idea_group = religious_ideas
				piety = 0.5
				estate_influence = {
					estate = estate_church
					influence = 50
				}
			}
			religion_group = muslim
		}
		effect = {
			sahel_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			niger_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			guinea_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = hau_the_jiihad
				duration = 9125
			}
		}
	}

	hau_convert_west_africa = {
		icon = mission_son_back_to_the_roots
		required_missions = { hau_prepare_the_jihad } 
		position = 3
		provinces_to_highlight = {}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = obj_convert_25_provinces_tooltip
				check_variable = { which = num_converted_religion value = 25 }
			}
			is_defender_of_faith = yes
			religion_group = muslim
		}
		effect = {
			add_country_modifier = {
				name = hau_the_jiihad
				duration = 9125
			}
		}
	}

	hau_finish_the_jihad = {
		icon = mission_mosque
		required_missions = { hau_convert_west_africa } 
		position = 5
		provinces_to_highlight = {
			OR = {
				region = sahel_region
				region = niger_region
				region = guinea_region
			}
			NOT = { religion_group = muslim }
			is_empty = no
		}
		trigger = {
			sahel_region = {
				OR = {
					is_empty = yes
					religion_group = muslim
				}
				type = all
			}
			niger_region = {
				OR = {
					is_empty = yes
					religion_group = muslim
				}
				type = all
			}
			guinea_region = {
				OR = {
					is_empty = yes
					religion_group = muslim
				}
				type = all
			}
			religion_group = muslim
		}
		effect = {
			add_country_modifier = {
				name = hau_caliphate_of_the_sahel
				duration = -1
			}
		}
	}
}