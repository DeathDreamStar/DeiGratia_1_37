#When adding effects directly in on_actions always consider if it would be best to do so through a scripted effect. on_actions with a lot of script in them are harder to get an overview of.

# country
on_startup = {
	if = {
		limit = {
			ai = no
		}
		country_event = {
			id = ipe_setting.1
		}
	}
	if = {
		limit = {
			current_age = age_of_discovery
		}
		LXA = {
			if = {
				limit = {
					NOT = { has_country_flag = lxa_loyalty_flag }
				}
				add_estate_loyalty = {
					estate = estate_church
					loyalty = -10
				}
				set_country_flag = lxa_loyalty_flag
			}
		}
	}
	emperor = {
		save_global_event_target_as = Emperor
	}
	if = {
		limit = {
			is_emperor_of_china = yes
		}
		save_global_event_target_as = EmperorOfChina
	}
	events = {
		muslim_school_events.20 #Pick School
#		flavor_fra.15000 #Make the French Revolution happen if starting in 1789

		ipe_startup.1 # New Troops for Holy Roman Emperor
		ipe_startup.2 # New Troops for Electors
		ipe_startup.3 # New Troops for Oirat
		ipe_startup.4 # Ming Setup
		ipe_startup.5 # Stability and Manpower for All Countries
		ipe_startup.6 # Persia Setup
		ipe_startup.7 # Stability Reductions
		ipe_startup.8 # New Troops for Burgundy
		ipe_startup.10 # New Troops for Portugal
		ipe_startup.13 # Ottoman Military Power
		ipe_startup.14 # New Troops for Morocco
		ipe_startup.15 # Corruption Modifiers
		ipe_startup.18 # Indonesian Province Discoveries
		ipe_startup.19 # Horde Province Discoveries
		ipe_startup.20 # Saharan Province Discoveries
		ipe_startup.21 # Muisca Province Discoveries
		ipe_startup.22 # Japanese Province Discoveries
		ipe_startup.23 # Inheritance Warning
		ipe_startup.24 # Inflation Modifiers (Gold)
		ipe_startup.25 # Inflation Modifiers (Silver)
		ipe_startup.26 # Growing Commercial Ventures
		ipe_startup.27 # Kashgar Province Discoveries
	}
	if = {
		limit = {
			has_dlc = "Cradle of Civilization"
			has_country_modifier = tur_janissary
		}
		remove_country_modifier = tur_janissary
	}
	initialize_schools_effect = yes #This is only used here but is used for readability of on_action file.

	if = {
		limit = {
			NOT = { has_country_flag = new_flavour_bav_13_has_been_triggered }
			OR = {
				tag = UBV
				tag = LBV
				tag = ING
			}
		}
		set_country_flag = new_flavour_bav_13_has_been_triggered
		country_event = { id = new_flavour_bav.13 days = 90 } #better not to allow almost instant DOWs
	}
	if = {
		limit = {
			tag = FRA
			started_in = 1789.7.14
			NOT = { is_year = 1790 }
			NOT = { has_disaster = french_revolution }
		}
		add_disaster_progress = {
			value = 100
			disaster = french_revolution
		}
	}
	if = {
		limit = {
			tag = ARA
			started_in = 1444.11.11
			NOT = { is_year = 1459 }
		}
		ARA = {
			set_country_flag = aragon_monarch_flag
		}
		NAV = {
			set_ruler_flag = navarra_monarch_flag
		}
	}
}

# country
on_religion_change = {
	on_religion_change_estate_privileges_effect = yes
	judaism_on_religion_change_effect = yes
	###removes catholic modifiers
		remove_country_modifier = counter_reformation
		remove_country_modifier = the_statue_in_restraint_of_appeals
		remove_country_modifier = revocation_of_restraint_of_appeals
		remove_country_modifier = bavarian_jesuits
		remove_country_modifier = the_societas_jesu
		remove_country_modifier = the_declaration_of_indulgence
		remove_country_modifier = de_heretico_comburendo
		remove_country_modifier = the_conventicle_act
	if = {
		limit = {
			has_reform = indian_sultanate_reform
			NOT = { religion_group = muslim }
		}
		remove_government_reform = indian_sultanate_reform
	}

	if = {
		limit = {
			has_reform = feudal_theocracy
			NOT = { religion_group = muslim }
			NOT = { religion_group = zoroastrian_group }
		}
		remove_government_reform = feudal_theocracy
	}

	if = {
		limit = {
			government = native
			OR = {
				religion = nahuatl
				religion = mesoamerican_religion
				religion = inti
			}
		}
		change_government = monarchy
		add_government_reform = autocracy_reform
	}


	if = {
		limit = {
			has_heir = yes
		}
		set_heir_religion = ROOT
	}
	if = {
		limit = {
			has_regency = no
		}
		set_ruler_religion = ROOT
	}
	if = {
		limit = {
			has_dlc = "Rights of Man"
			has_consort = yes
		}
		set_consort_religion = ROOT
	}
	if = {
		limit = {
			NOT = { religion = orthodox }
		}
		every_known_country = {
			limit = {
				reverse_has_opinion_modifier = {
					who = ROOT
					modifier = closed_down_the_patriarchate
				}
			}
			reverse_remove_opinion = {
				who = ROOT
				modifier = closed_down_the_patriarchate
			}
		}
	}
	if = {
		limit = {
			religion = catholic
			has_ruler_flag = personal_catholic_sympathies
		}
		country_event = { id = protestantism_events.19 }
	}
	if = {
		limit = {
			religion = protestant
		}
		set_country_flag = converted_to_protestantism
	}
	if = {
		limit = { has_country_modifier = bav_religious_mandate_mod }
		remove_country_modifier = bav_religious_mandate_mod
	}
	add_country_modifier = {
		name = recently_changed_religion_dummy
		duration = 10
		hidden = yes
	}
	if = {
		limit = {
			NOT = { religion_group = muslim }
			any_owned_province = { has_province_modifier = sufi_shrine }
		}
		every_owned_province = {
			limit = { has_province_modifier = sufi_shrine }
			remove_province_modifier = sufi_shrine
		}
	}
	if = {
		limit = {
			religion = shamanism
			has_country_modifier = son_fetishism_as_secondary_religion
		}
		remove_country_modifier = son_fetishism_as_secondary_religion
		every_owned_province = {
			limit = {
				has_province_modifier = son_fetishism_as_secondary_religion_province
			}
			remove_province_modifier = son_fetishism_as_secondary_religion_province
		}
	}
	events = {
		muslim_school_events.20 #Pick School
		propagate_religion_events.7 #Propagated Country is now Muslim
	}
}

# country.
on_secondary_religion_change = {
	# Done from code: add_prestige = -50 (Define: CHANGE_SECONDARY_PRESTIGE_HIT)
	every_owned_province = {
		limit = { has_province_modifier = tengri_monastic_order }
		remove_province_modifier = tengri_monastic_order
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_shiite_settled_in_capital }
		remove_province_modifier = tengri_shiite_settled_in_capital
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_insincere_leadership }
		remove_province_modifier = tengri_insincere_leadership
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_religious_influx }
		remove_province_modifier = tengri_religious_influx
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_ruler_questioned }
		remove_province_modifier = tengri_ruler_questioned
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_strengthened_local_clans }
		remove_province_modifier = tengri_strengthened_local_clans
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_growing_cities }
		remove_province_modifier = tengri_growing_cities
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_christian_mission }
		remove_province_modifier = tengri_christian_mission
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_unchristian_values }
		remove_province_modifier = tengri_unchristian_values
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_monastic_order }
		remove_province_modifier = tengri_monastic_order
	}
	every_owned_province = {
		limit = { has_province_modifier = hindufication }
		remove_province_modifier = hindufication
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_influx_of_monks }
		remove_province_modifier = tengri_influx_of_monks
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_abandoning_the_old_ways }
		remove_province_modifier = tengri_abandoning_the_old_ways
	}
	remove_country_modifier = tengri_devout_muslim
	remove_country_modifier = tengri_confucian_elites_alienated
	remove_country_modifier = tengri_confucian_titles
	remove_country_modifier = tengri_traditionalists_strengthened
	remove_country_modifier = tengri_confucian_nobles
	remove_country_modifier = tengri_pali_legal_traditions
	remove_country_modifier = tengri_religious_pilgrimages
	remove_country_modifier = tengri_monks_in_capital
	remove_country_modifier = tengri_influx_of_monks
	remove_country_modifier = tengri_shiite_immigration
	remove_country_modifier = support_of_the_khojas
	remove_country_modifier = black_shamanism_modifier
	remove_country_modifier = tengri_animist_pantheon
	remove_country_modifier = zoroastrian_traders
	remove_country_modifier = spread_of_tengri_tea_ceremony
	remove_country_modifier = tengri_tea_ceremony
	remove_country_modifier = tengri_japanese_swordsmithing
	remove_country_modifier = tengri_bow_and_arrow_defended
	remove_country_modifier = tengri_support_of_shamans
	remove_country_modifier = tengri_hindu_conflict
	remove_country_modifier = tengri_hindu_syncretism
	remove_country_modifier = tengri_devout_christian_ruler
	remove_country_modifier = tengri_personal_confessor
	remove_country_modifier = tengri_confucian_administrators
	remove_country_modifier = tengri_traditional_elites_alienated
	remove_country_modifier = tengri_jihad
	remove_country_modifier = tengri_stood_up_for_yassa
	remove_country_modifier = tengri_sufi_teacher
	remove_country_modifier = tengri_qadi
	remove_country_modifier = tengri_religious_influx
	remove_country_modifier = tengri_ibadi_scholars
	remove_country_modifier = tengri_clergy_conflicts
	remove_country_modifier = tengri_shamans_spurned
	clr_country_flag = khojas_established
	clr_country_flag = tengri_christian_devout_court
	clr_ruler_flag = tengri_muslim_ruler_questioned
	if = {
		limit = {
			check_variable = { which = khojas_retained value = 1 }
		}
		set_variable = {
			which = khojas_retained value = 0
		}
	}
}

# country. Spawned when Enforcing Rebel Demands through a Support Rebels-war.
on_enforce_rebel_demands = {
	# ROOT = The winning country
	# FROM = The loosing country
	set_country_flag = helped_rebels_win_war
}

# country
on_colonial_liberation = {
	if = {
		limit = {
			NOT = { has_country_flag = old_world_to_new_world_flag }
		}
		country_event = { id = colonial_nation.90 days = 1 }
	}
}

# country
on_colonial_reintegration = {
	events = {
		colonial_nation.91
	}
}

# country
on_peace_actor = {
	events = {
		usa_dlc.36				# Evacuation Day
		native_americans.7		# Appoint Peace Chief
	}
}

# country
on_peace_recipient = {
	events = {
		native_americans.7		# Appoint Peace Chief
	}
}

# country
# root = winning country, from = loser country
on_war_won = {
	FROM = { country_event = { id = flavor_cri.6 } }
	ROOT = { country_event = { id = tributary_events.32 } }
	
	if = {
		limit = {
			is_part_of_hre = yes
			FROM  = { is_part_of_hre = yes }
		}
		ROOT = { save_global_event_target_as = hre_winner }
		FROM = { save_global_event_target_as = hre_loser }
		random_known_country = {
			limit = {
				has_reform = free_city
				NOT = {
					prestige = 40
				}
				NOT = {
					has_country_modifier = fc_treatyconference_timer
				}
			}
			add_country_modifier = {
				name = fc_treatyconference_timer
				duration = 3650
				hidden = yes
			}
			country_event = {
				id = free_cities.7
				days = 7
			}
		}
	}

	if = {
		limit = {
			tag = MLO
			NOT = { has_country_flag = emp_mlo_won_war_with_swiss_mercs }
			any_hired_mercenary_company = {
				home_province = {
					OR = {
						area = switzerland_area
						area = romandie_area
					}
				}
			}
		}
		set_country_flag = emp_mlo_won_war_with_swiss_mercs
	}
	
	if = {
		limit = {
			is_hiring_condottiere_from = SWI
		}
		SWI = { set_country_flag = won_condottiere_war }
		if = {
			limit = {
				tag = PAP
			}
			SWI = {
				set_country_flag = hired_to_pope
			}
		}
	}

	if = {
		limit = {
			primary_culture = melanesian
			NOT = { has_country_modifier = warlord_mod }
		}
		FROM = {
			country_event = {
				id = polynesian.17
			}
		}
	}
	if = {
		limit = {
			ROOT = {
				religion = jewish
				has_church_aspect = judaism_purim_teachings_aspect
			}
		}
		add_church_power = 10
	}
}

# country
# root = loser country, from = winner country
on_war_lost = {
	ROOT = { country_event = { id = flavor_cri.6 } }
	ROOT = { country_event = { id = tributary_events.32 } }
	if = {
        limit = {
            government = republic
            is_lesser_in_union = yes
		}
		change_government_to_monarchy = yes
    }
	if = {
		limit = {
			FROM = { is_emperor = yes }
			NOT = { has_country_flag = reined_in_for_shadow_kingdom }
			NOT = { has_global_flag = italians_leave_hre }
			is_emperor = no
			is_part_of_hre = yes
			OR = {
				capital_scope = { region = italy_region }
				AND = {
					culture_group = latin
					any_owned_province = {
						region = italy_region
					}
				}
			}
		}
		set_country_flag = reined_in_for_shadow_kingdom
	}
	add_country_modifier = {
		name = just_lost_war_timer
		duration = 10
		hidden = yes
	}
}

# country
# root = winning country, from = loser country
on_battle_won_country = {
	if = {
		limit = {
			ROOT = {
				tag = ALB
				NOT = { has_country_flag = albanian_victory }
			}
			FROM = {
				tag = TUR
			}
		}
		ROOT = { set_country_flag = albanian_victory }
	}
	if = {
		limit = {
			ROOT = {
				religion = jewish
				has_church_aspect = judaism_purim_teachings_aspect
			}
		}
		ROOT = {
			add_war_exhaustion = -0.05
		}
	}
}

# country
# root = loser country, from = winner country
on_battle_lost_country = {
	battle_cult_spreading_effect = yes #Scripted effect for fetishist cult mechanics.
	random_events = {
		90 = 0
		10 = friendship_events.1 #Historical Friendship Broken
	}
}

# province
# root = location, from = loser country
on_battle_won_province = {
	if = {
		limit = {
			from = {
				tag = REB
				is_rebel_type = revolutionary_rebels
			}
			owner = {
				any_owned_province = {
					region = root
					has_revolution_in_province = yes
				}
				NOT = { has_disaster = french_revolution }
				NOT = { has_disaster = revolution }
				NOT = { has_spawned_rebels = revolutionary_rebels }
			}
		}
		owner = { country_event = { id = center_of_revolution.1600 } }
	}
}

#Unit Scope OnAction for Battle Won
on_battle_won_unit = {
	if = {
		limit = {
			unit_owner = { ai = no } #Scopes to Unit Owner from Unit Scope
			general_with_steam_name = yes #Unit Scope Trigger
		}
		unit_owner = { set_country_flag = general_with_steam_name_won_battle }
	}
	if = {
		limit = {
			general_with_name = "Damarwulan"
		}
		unit_owner = {
			change_variable = {
				which = DamarwulanWinVariable 
				value = 1
			}
		}
	}
	if = {
		limit = {
			general_with_name = "Damarwulan"
			unit_owner = {
				check_variable = {
					which = DamarwulanWinVariable
					value = 5
				}
			}
		}
		unit_owner = {
			country_event = { id = majapahit.2 days = 2 }
		}
	}
	if = {
		limit = {
			unit_owner = {
				mission_completed = son_military_expertise
				NOT = { mission_completed = son_win_battles }
			}
		}
		unit_owner = {
			change_variable = {
				which = son_fight_counter
				value = 1
			}
		}
		if = {
			limit = {
				is_ruler_commanding_unit = yes
			}
			unit_owner = {
				change_variable = {
					which = son_fight_counter
					value = 1
				}
			}
		}
	}
}

# #Unit Scope OnAction for Battle Lost
on_battle_lost_unit = {
    if = {
        limit = {
            unit_owner = {
                tag = MNG
                has_ruler_flag = mng_militry_incompetence
            }
            is_ruler_commanding_unit = yes
			enemy_unit = {
				unit_owner = {
					tag = OIR
				}
			}
        }
        OIR = {
            country_event = { id = flavor_oir.2 }
        }
    }
}

# province
# root = location, from = country doing it
on_added_to_trade_company ={

}

# province
# root = location, from = country doing it
on_removed_from_company ={

}

# province
# root = location, from = country doing it
on_company_formed ={

}

# province
# root = location, from = country doing it
on_company_disolved ={

}

# province
# root = location, from = winner country
on_battle_lost_province = {
	random_events = {
		1000 = 0
		100 = tyw_events.22	# Capital Battle in Religious War
	}
}

# country
# root = winning country, from = location
on_siege_won_country = {
	if = {
		limit = {
			ROOT = {
				religion = jewish
				has_church_aspect = judaism_remember_passover_aspect
			}
			FROM = {
				owner = {
					war_with = ROOT
				}
				fort_level = 1
			}
		}
		ROOT = {
			add_church_power = 5
		}
	}
	events = {
		tyw_events.14 # Fall of Prague in Religious War
		flavor_oir.5 # Oirats capture Beijing
		flavor_lna.1 # Emerald Buddha
		flavor_son.14 # Djenne surrenders to Songhai Trigger
	}
	random_events = {
		10 = army_professionalism_events.1 #City Sacked
		100 = 0
	}
}

# country
# root = losing country, from = location
on_siege_lost_country = {
	events = {
		curia.8
		papacy_events.5
	}
}

# province
# root = location, from = losing country
on_siege_won_province = {
	events = {
		synthetic_dawn.4
	}
	if = {
		limit = {
			from = {
				tag = REB
				is_rebel_type = revolutionary_rebels
			}
			owner = {
				any_owned_province = {
					region = root
					has_revolution_in_province = yes
				}
				NOT = { has_disaster = french_revolution }
				NOT = { has_disaster = revolution }
				NOT = { has_spawned_rebels = revolutionary_rebels }
			}
		}
		owner = { country_event = { id = center_of_revolution.1600 } }
	}
}

# province
# root = location, from = winning country
on_siege_lost_province =  {
	events = {
		french_wars_of_religion.7 #Ravening Religious Fanatics
		french_wars_of_religion.9 #french_wars_of_religion.9
	}
}

# province
# root = location, from = country that abandons colony
# Fired right before the colony is abandoned.
on_abandon_colony = {
}

# province
# root = location, from = country that owns it
# Fired right after the great project is constructed
on_great_project_constructed = {
}

# OBS: Consider that the following on_actions can be called for Personal Union juniors as well.
# country
on_new_monarch = {
	crimean_succession_effect = yes #Scripted effect
	slesvig_question_effect = yes #Scripted effect
	if = {
		limit = {
			has_consort_regency = no
			any_owned_province = {
				has_province_modifier = domain_of_spouses_family
			}
		}
		every_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = {
			has_consort_regency = no
			any_owned_province = {
				has_province_modifier = home_of_consort
			}
		}
		every_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = {
			NOT = { has_dlc = "Mandate of Heaven" }
			NOT = { legitimacy = 80 }
		}
		country_event = { id = china_events.32 }	# History of last ruler
	}
	if = {
		limit = {
			religion = jewish
		}
		clr_country_flag = ruler_is_messiah
	}
	if = {
		limit = {
			tag = MAG
			has_country_flag = brandenburg_administrators
		}
		MAG = {
			overlord = {
				country_event = {
					id = ipeBRA.7
				}
			}
		}
	}
	if = {
		limit = {
			tag = HUN
			has_ruler = "Ladislaus Postumus"
			AUT = {
				has_ruler = "Ladislaus Postumus"
				has_country_flag = death_of_albertines
			}
		}
		AUT = {
			clr_country_flag = death_of_albertines
		}
		HUN = {
			create_union = AUT
		}
	}
	if = {
		limit = {
			tag = HUN
			has_ruler = "Ladislaus Postumus"
			BOH = {
				has_ruler = "Ladislaus Postumus"
				has_country_flag = death_of_albertines
			}
		}
		BOH = {
			clr_country_flag = death_of_albertines
		}
		HUN = {
			create_union = BOH
		}
	}
	if = {
		limit = {
			tag = BOH
			has_ruler = "Ladislaus Postumus"
			BOH = {
				has_ruler = "Ladislaus Postumus"
				has_country_flag = death_of_albertines
			}
			is_subject = no
		}
		AUT = {
			clr_country_flag = death_of_albertines
		}
		BOH = {
			create_union = AUT
		}
	}
	# ambrosian_republic_effect = yes
	succession_culture_religion_effect = yes
	sheik_ul_islam_effect = yes
	hab_remove_mission_mods_if_not_emperor_effect = yes
	thu_remain_von_wettin_effect = yes
	if = {
		limit = { has_any_heir_cult_active = yes }
		remove_heir_cult = yes
	}
	events = {
		tribal_succession.1		# Harsh anti-tribals.
		9492 					# Remove some event modifiers
		flavor_boh.8			# Winter King in Prague
		flavor_kol.1			# Bavarian Archbishop
		flavor_tur.102			# Janissary Reward
		flavor_ori.7			# Hamvira Victorious
		flavor_kbo.1			# The two branches of the Sayfawa dynasty
		flavor_kbo.8			# Sayfawa pretenders
		flavor_zan.5			# Coup of Coup of Suleiman and Muhammad al-Mazlum.
		purple_phoenix.1		# BYZ pretenders
		flavor_pol.3480			# The Pacta Conventa
		protestantism_events.15	# Catholic Leaning Monarch
		tengri_events.17		# Keep the Khojas in Power?
		flavor_tus.15			# Savonarola Dies
		flavor_brapru.22		# Succession of Albrecht Achilles
		flavor_brapru.25		# Dispositio Achillea (can also trigger from flavor_brapru.22)
		flavor_nor.27			# Proclamation in Hamar
		china_events.43			# Picking new Capital for China
		celestial_empire_events.3 #Resistance to Sinicization
		flavor_boh.2			#Heretic Kings
		flavor_hun.17			#Maintaining the Black Army
		flavor_tim.1			#Death of Shah Rukh
		muslim_school_events.20 #No Religious School
		flavor_daimyo.4			#Shiba Yoshikado
		flavor_fra.9000			# Fran√ßois Villon
	}
	random_events = {
		1000 = 0
		100 = flavor_kol.1		# Bavarian Archbishop
		100 = flavor_hsa.3		# Hansa: Tagfahrt
		100 = inti_events.1		# Birth of a Panaca
		50 = dynastic_events.4
		50 = dynastic_events.5
		25 = harem_events.7		#Failed Policy of Fratricide
	}
}

on_new_consort = {
	country_event = { id = consort_events.2 }
	if = {
		limit = { has_ruler_flag = had_10_years_anniversary }
		clr_ruler_flag = had_10_years_anniversary
	}
	if = {
		limit = { has_ruler_flag = had_20_years_anniversary }
		clr_ruler_flag = had_20_years_anniversary
	}
	if = {
		limit = { has_ruler_flag = consort_had_affection_of_ruler }
		clr_ruler_flag = consort_had_affection_of_ruler
	}
	if = {
		limit = { has_country_modifier = sought_after_bachelor }
		remove_country_modifier = sought_after_bachelor
	}
	random_events = {
		1000 = 0
		25 = polynesian.16 #fijian marriage
	}
}

# country
on_monarch_death = {
	if = {
		limit = {
			tag = DAN
			has_country_flag = christopher_of_bavaria
			is_subject = no
			NOR = {
				is_subject_of = ROOT
				is_lesser_in_union = yes
			}
			SWE = {
				is_subject_of = ROOT
				is_lesser_in_union = yes
			}
		}
		DAN = {
			country_event = {
				id = ipeDAN.3
			}
		}
		if = {
			limit = {
				OLD = {
					has_regency = no
					ai = yes
					NOT = {
						war_with = DAN
					}
					has_ruler_flag = christian_of_oldenburg
				}
			}
			DAN = {
				country_event = {
					id = ipeDAN.12
				}
			}
		}
	}
	if = {
		limit = {
			tag = ANS
			BRA = {
				has_country_flag = albrecht_achilles_flag
			}
		}
		BRA = {
			clr_country_flag = albrecht_achilles_flag #Just to be sure
			kill_heir = {} #If Albrecht Achilles dies in Ansbach he will also be dead in Brandenburg, will appear as normal death of heir to BRA.
		}
	}
	if = {
		limit = { has_country_modifier = sought_after_bachelor }
		remove_country_modifier = sought_after_bachelor
	}
	if = {
		limit = {
			tag = SAX
			dynasty = "von Wettin"
			has_country_flag = sax_thuringen_split_to_happen
			government = monarchy
			NOT = {
				exists = THU
			}
			any_owned_province = {
				is_core = THU
				NOT = {
					is_capital_of = ROOT
				}
			}
			has_regency = no
		}
		clr_country_flag = sax_thuringen_split_to_happen
	}
	if = {
		limit = { tag = SAM }
		country_event = { id = polynesian.35 }
	}
	if = {
		limit = { tag = TOG }
		country_event = { id = polynesian.36 }
	}
	if = {
		limit = {
			tag = SUR
			has_country_flag = sher_shah_suri
		}
		clr_country_flag = sher_shah_suri
		country_event = {
			id = ipeMUG.11
		}
	}
	if = {
		limit = {
			has_country_flag = kamran_mirzas_inheritance
		}
		country_event = {
			id = ipeMUG.2
		}
	}
	if = {
		limit = {
			is_subject_of_type = vassal
			has_country_flag = this_fief_will_die
			NOT = {
				has_ruler_flag = inheritable_fief
			}
		}
		overlord = {
			diplo_annex_cost = yes
			inherit = ROOT
			country_event = {
				id = ipe_subject.3
			}
		}
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = pb_fate
				has_country_flag = puppeting_bishopric
				has_ruler_flag = puppeted_bishopric
			}
			is_subject_of_type = puppet_bishopric
		}
		country_event = {
			id = ipe_subject.11
		}
	}
	if = {
		limit = {
			tag = CAS
			has_ruler_flag = isabel_de_trastamara
		}
		CAS = {
			country_event = {
				id = flavor_spa.3716
			}
		}
	}
	if = {
		limit = {
			tag = TUR
			has_country_flag = murad_returns
			NOT = {
				has_country_flag = mehmed_exiled
			}
		}
		clr_country_flag = murad_returns
		if = {
			limit = {
				has_heir_flag = mehmed_second_rule
			}
			set_ruler = mehmed_is_exiled
		}
		country_event = {
			id = ipeTUR.56
		}
	}
	if = {
		limit = {
			tag = TUR
			has_country_flag = cem_rebellion
			NOT = {
				has_ruler_flag = mehmed_second_rule
			}
			is_at_war = no
			NOT = {
				has_disaster = ottoman_civil_war
				is_year = 1500
			}
		}
		clr_country_flag = cem_rebellion
		country_event = {
			id = ipeTUR.12
		}
	}
	if = {
		limit = {
			tag = TUR
			has_country_flag = cem_rebellion
			is_year = 1500
		}
		clr_country_flag = cem_rebellion
	}
	if = {
		limit = {
			tag = CYP
			has_country_flag = venetian_inheritance
			is_subject = no
			VEN = {
				is_subject = no
				exists = yes
			}
		}
		clr_country_flag = venetian_inheritance
		CYP = {
			country_event = {
				id = ipeVEN.2
			}
		}
	}
	if = { # CGDD
		limit = {
			is_subject_of_type = vassal
			religion_group = christian
			overlord = {
				culture_group = ROOT
				marriage_with = ROOT
				dynasty = ROOT
				total_development = ROOT
				religion_group = christian
			}
			NOT = {
				has_country_flag = angevin_inheritance
				has_country_flag = gorizian_inheritance
				has_country_flag = rijekan_inheritance
			}
		}
		random = {
			chance = 50
			every_subject_country = {
				limit = {
					is_lesser_in_union = yes
				}
				ROOT = {
					inherit = PREV
				}
			}
			overlord = {
				inherit = ROOT
				add_prestige = 5
			}
		}
	}
	if = { # cgDD
		limit = {
			is_subject_of_type = vassal
			religion_group = christian
			overlord = {
				NOT = {
					culture_group = ROOT
				}
				dynasty = ROOT
				marriage_with = ROOT
				total_development = ROOT
				religion_group = christian
			}
			NOT = {
				has_country_flag = angevin_inheritance
				has_country_flag = gorizian_inheritance
				has_country_flag = rijekan_inheritance
			}
		}
		random = {
			chance = 45
			every_subject_country = {
				limit = {
					is_lesser_in_union = yes
				}
				ROOT = {
					inherit = PREV
				}
			}
			overlord = {
				inherit = ROOT
				add_prestige = 5
			}
		}
	}
	if = { # CGdd
		limit = {
			is_subject_of_type = vassal
			religion_group = christian
			overlord = {
				culture_group = ROOT
				NOT = {
					dynasty = ROOT
				}
				marriage_with = ROOT
				total_development = ROOT
				religion_group = christian
			}
			NOT = {
				has_country_flag = angevin_inheritance
				has_country_flag = gorizian_inheritance
				has_country_flag = rijekan_inheritance
			}
		}
		random = {
			chance = 15
			every_subject_country = {
				limit = {
					is_lesser_in_union = yes
				}
				ROOT = {
					inherit = PREV
				}
			}
			overlord = {
				inherit = ROOT
				add_prestige = 5
			}
		}
	}
	if = { # cgdd
		limit = {
			is_subject_of_type = vassal
			religion_group = christian
			overlord = {
				NOT = {
					culture_group = ROOT
					dynasty = ROOT
				}
				marriage_with = ROOT
				total_development = ROOT
				religion_group = christian
			}
			NOT = {
				has_country_flag = angevin_inheritance
				has_country_flag = gorizian_inheritance
				has_country_flag = rijekan_inheritance
			}
		}
		random = {
			chance = 10
			every_subject_country = {
				limit = {
					is_lesser_in_union = yes
				}
				ROOT = {
					inherit = PREV
				}
			}
			overlord = {
				inherit = ROOT
				add_prestige = 5
			}
		}
	}
	if = {
		limit = {
			tag = BUR
			NOT = {
				dynasty = "de Bourgogne"
				government_rank	= 2
			}
			OR = {
				FRA = {
					government_rank = 2
					government = monarchy
				}
				any_country = {
					is_emperor = yes
				}
			}
		}
		BUR = {
			every_owned_province = {
				limit = {
					OR = {
						region = france_region
						area = flanders_area
					}
				}
				add_core = FRA
			}
			every_subject_country = {
				every_owned_province = {
					limit = {
						OR = {
							region = france_region
							area = flanders_area
						}
					}
					add_core = FRA
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						is_part_of_hre = yes
						area = flanders_area
					}
				}
				set_province_flag = imperial_burgundy_cores
			}
			every_subject_country = {
				every_owned_province = {
					limit = {
						OR = {
							is_part_of_hre = yes
							area = flanders_area
						}
					}
					set_province_flag = imperial_burgundy_cores
				}
			}
			emperor = {
				every_province = {
					limit = {
						has_province_flag = imperial_burgundy_cores
					}
					add_core = PREV
					clr_province_flag = imperial_burgundy_cores
				}
			}
		}
		FRA = {
			country_event = {
				id = ipeBUR.12
			}
		}
		emperor = {
			country_event = {
				id = ipeBUR.12
			}
		}
		BUR = {
			country_event = {
				id = ipeBUR.12
			}
		}
	}
	if = {
		limit = {
			has_country_flag = death_of_albertines
			NOT = {
				OR = {
					has_ruler_flag = ladislaus_postumus
					has_heir_flag = ladislaus_postumus
				}
			}
			STY = {
				dynasty = "von Habsburg"
			}
		}
		STY = {
			country_event = {
				id = ipeHAB.6
			}
		}
	}
	if = {
		limit = {
			has_country_flag = death_of_albertines
			NOT = {
				OR = {
					has_ruler_flag = ladislaus_postumus
					has_heir_flag = ladislaus_postumus
				}
			}
			NOT = {
				has_country_flag = ladislaus_already_killed
			}
		}
		set_country_flag = ladislaus_already_killed
		country_event = {
			id = ipeHAB.1
		}
	}
	if = {
		limit = {
			has_country_flag = hungarian_succession_crisis
			NOT = {
				OR = {
					has_ruler_flag = matyas_hunyadi
					has_heir_flag = matyas_hunyadi
				}
			}
			BOH = {
				exists = yes
				is_subject = no
				government = monarchy
				has_regency = no
				NOT = {
					has_country_flag = responded_to_crisis
				}
			}
		}
		BOH = {
			country_event = {
				id = ipeHAB.52
			}
			set_country_flag = responded_to_crisis
		}
	}
	if = {
		limit = {
			has_country_flag = hungarian_succession_crisis
			NOT = {
				OR = {
					has_ruler_flag = matyas_hunyadi
					has_heir_flag = matyas_hunyadi
				}
			}
			POL = {
				exists = yes
				is_subject = no
				government = monarchy
				has_regency = no
				NOT = {
					has_country_flag = responded_to_crisis
				}
			}
		}
		POL = {
			country_event = {
				id = ipeHAB.52
			}
			set_country_flag = responded_to_crisis
		}
	}
	if = {
		limit = {
			has_country_flag = hungarian_succession_crisis
			NOT = {
				OR = {
					has_ruler_flag = matyas_hunyadi
					has_heir_flag = matyas_hunyadi
				}
			}
			HAB = {
				exists = yes
				is_subject = no
				government = monarchy
				has_regency = no
				NOT = {
					has_country_flag = responded_to_crisis
				}
			}
		}
		HAB = {
			country_event = {
				id = ipeHAB.52
			}
			set_country_flag = responded_to_crisis
		}
	}
	if = {
		limit = {
			tag = HUN
			has_country_flag = regent_janos
			has_heir = "Ladislaus Postumus"
			CLI = {
				exists = yes
				is_subject = no
				has_regency = no
			}
		}
		HUN = {
			clr_country_flag = regent_janos
		}
		CLI = {
			country_event = {
				id = ipeHAB.71
			}
		}
	}
	if = {
		limit = {
			tag = GRZ
			HAB = {
				exists = yes
				is_subject = no
			}
			has_country_flag = gorizian_inheritance
			OR = {
				is_subject_of = HAB
				is_subject = no
			}
		}
		GRZ = {
			clr_country_flag = gorizian_inheritance
		}
		HAB = {
			country_event = {
				id = ipeHAB.67
			}
		}
	}
	if = {
		limit = {
			tag = FIU
			HAB = {
				exists = yes
				is_subject = no
			}
			has_country_flag = rijekan_inheritance
			OR = {
				is_subject_of = HAB
				is_subject = no
			}
		}
		FIU = {
			clr_country_flag = rijekan_inheritance
		}
		HAB = {
			country_event = {
				id = ipeHAB.84
			}
		}
	}
	if = {
		limit = {
			tag = CEY
			is_subject_of = POR
			has_country_flag = inheritance_of_kotte
		}
		CEY = {
			clr_country_flag = inheritance_of_kotte
		}
		POR = {
			country_event = {
				id = ipeCEY.8
			}
		}
	}
	if = {
		limit = {
			tag = GLC
			MOS = {
				exists = yes
				OR = {
					is_subject = no
					is_subject_of_type = tributary_state
				}
			}
			NOT = {
				has_ruler = "Dmitry Shemyaka"
			}
			OR = {
				is_subject_of = MOS
				is_subject = no
				is_subject_of_type = tributary_state
			}
			has_country_flag = galich_inheritance
		}
		GLC = {
			clr_country_flag = galich_inheritance
		}
		MOS = {
			country_event = {
				id = MOS_civil_war.19
			}
		}
	}
	if = {
		limit = {
			tag = DAU
			NOT = {
				has_ruler_flag = ambitions_of_dauphin
			}
			FRA = {
				has_heir_flag = ambitions_of_dauphin
			}
		}
		FRA = {
			kill_heir = {}
			country_event = {
				id = ipeFRA.28
			}
		}
	}
	if = {
		limit = {
			tag = FRA
			NOT = {
				OR = {
					has_heir_flag = ambitions_of_dauphin
					has_ruler_flag = ambitions_of_dauphin
				}
			}
			DAU = {
				has_ruler_flag = ambitions_of_dauphin
				exists = yes
			}
		}
		DAU = {
			kill_ruler = yes
		}
		FRA = {
			country_event = {
				id = ipeFRA.28
			}
		}
	}
	if = {
		limit = {
			tag = FRA
			has_ruler_flag = ambitions_of_dauphin
			any_known_country = {
				has_country_modifier = harboring_the_dauphin
			}
		}
		country_event = {
			id = ipeFRA.26
		}
	}
	if = {
		limit = {
			tag = FRA
			has_ruler_flag = ambitions_of_dauphin
			DAU = {
				has_ruler_flag = ambitions_of_dauphin
				exists = yes
			}
		}
		country_event = {
			id = ipeFRA.30
		}
	}
	if = {
		limit = {
			tag = ANJ
			FRA = {
				exists = yes
				is_subject = no
			}
			OR = {
				NOT = {
					dynasty = "de Valois"
					government_rank = 2
				}
				has_country_flag = angevin_inheritance
			}
			OR = {
				is_subject_of = FRA
				is_subject = no
			}
		}
		ANJ = {
			clr_country_flag = angevin_inheritance
		}
		FRA = {
			country_event = {
				id = ipePRO.1
			}
		}
	}
	if = {
		limit = {
			tag = HSK
			has_country_flag = hosokawa_succession
			NOT = {
				has_ruler_flag = yamana_heir
			}
		}
		country_event = {
			id = ipeJAP.29
		}
	}
	if = {
		limit = {
			tag = AYU
			has_ruler_flag = trailokanat_sukhothai
			SUK = {
				has_ruler_flag = trailokanat_sukhothai
			}
		}
		country_event = {
			id = ipeAYU.1
		}
	}
	if = {
		limit = {
			tag = SUK
			NOT = {
				has_ruler_flag = trailokanat_sukhothai
			}
			AYU = {
				has_heir_flag = trailokanat_sukhothai
			}
		}
		AYU = {
			kill_heir = {}
		}
	}
	if = {
		limit = {
			tag = ARA
			has_country_flag = withholding_navarrese_crown
			NOT = {
				has_ruler_flag = leonor_of_navarre
			}
			FOI = {
				has_consort_flag = leonor_lives
			}
			NAV = {
				is_subject_of = ARA
				is_lesser_in_union = yes
			}
		}
		FOI = {
			country_event = {
				id = ipeFRA.49
			}
		}
		ARA = {
			clr_country_flag = withholding_navarrese_crown
		}
	}
	if = {
		limit = {
			tag = ARA
			has_country_flag = withholding_navarrese_crown
			NOT = {
				has_ruler_flag = leonor_of_navarre
			}
			FOI = {
				NOT = {
					has_consort_flag = leonor_lives
				}
			}
			NAV = {
				is_subject_of = ARA
				is_lesser_in_union = yes
			}
		}
		FOI = {
			country_event = {
				id = ipeFRA.51
			}
		}
		ARA = {
			clr_country_flag = withholding_navarrese_crown
		}
	}

	burgundian_inheritance_start_effect = yes
	if = {
		limit = {
			has_a_primary_cult_selected = yes
			OR = {
				government = tribal
				government = monarchy
			}
			NOT = { has_ruler_flag = no_stab_bonus_on_ascending_the_throne }
			NOT = { has_heir_flag = no_stab_bonus_on_ascending_the_throne }
		}
		add_stability = 1
		if = {
			limit = {
				NOT = { heir_age = 15 }
			}
			set_heir_flag = no_stab_bonus_on_ascending_the_throne
		}
	}
	events = {
		flavor_nav.4 # Navarra succession event
		flavor_sax.8 # Treaty of Leipzig
		flavor_pap.16 # Borgia Pope
		flavor_pap.19 # death of borgia pope
		flavor_tus.22 # Medici Pope
		flavor_tus.24 # death of the Medici Pope
		majapahit.8 # Majapahit pretenders
		flavor_mal.11 # Mali pretenders
		flavor_mal.47 # Pilgrimage ends prematurely
	}
}

# country
on_regent = {
	if = {
		limit = {
			NOT = { has_global_flag = death_of_haji_giray } #Also set in history.
			tag = CRI
			exists = TUR
			is_subject = no
			TUR = {
				num_of_cities = ROOT
				is_subject = no
				num_of_ports = 1
			}
		}
		country_event = { id = flavor_cri.1 } #Death of Haji Giray
	}
	if = {
		limit = {
			NOT = { has_global_flag = death_of_haji_giray } #Also set in history.
			tag = CRI
			OR = {
				NOT = { exists = TUR }
				is_subject = yes
				TUR = { NOT = { num_of_cities = ROOT } }
				TUR = { is_subject = yes }
				TUR = { NOT = { num_of_ports = 1 } }
			}
		}
		set_global_flag = death_of_haji_giray
	}
	events = {
		tribal_succession.1	# harsh anti-tribals.
		flavor_tim.1			#Death of Shah Rukh
		flavor_daimyo.4			#Shiba Yoshikado
	}
}

# country
on_extend_regency = {
}

# country
on_new_term_election = {
	events = {
		700		# Election event
		elections.720		# Dutch Republic
		pirates.1
	}
}

# country
on_death_election = {
	if = {
		limit = { has_reform = presidential_despot_reform }
		remove_government_reform = presidential_despot_reform
	}
	if = {
		limit = {
			has_reform = pirate_republic_reform
		}
		set_country_flag = pirate_death_election
		country_event = { id = pirates.1 }
	}
	events = {
		701		# Election event
		elections.721		# Dutch Republic
		elections.800	# Lottery election
		flavor_tus.16 #Savonarola Leaves This World
	}
}

# country
on_death_foreign_slave_ruler = {
	events = {
		mamluk_events.0 # Choose new ruler
	}
}

# country
on_replace_governor = {
	events = {
		elections.707
	}
}


# country
on_bankruptcy = {
}

# country (country annexing, root = target)
on_diplomatic_annex = {
	events = {
		610
	}
}

# country
on_heir_death = {
	if = {
		limit = { has_country_flag = heir_dip_education }
		clr_country_flag = heir_dip_education
	}
	if = {
		limit = { has_country_flag = heir_mil_education }
		clr_country_flag = heir_mil_education
	}
	if = {
		limit = { has_country_flag = heir_adm_education }
		clr_country_flag = heir_adm_education
	}
	if = {
		limit = { has_ruler_flag = well_advised_tutored_heir }
		clr_ruler_flag = well_advised_tutored_heir
	}
	if = {
		limit = { has_ruler_flag = heir_went_on_grand_tour }
		clr_ruler_flag = heir_went_on_grand_tour
	}
	if = {
		limit = { has_country_flag = albrecht_achilles_flag }
		clr_country_flag = albrecht_achilles_flag #Death of original Albrecht Achilles
	}
	if = {
		limit = { has_ruler_flag = sancaga_cikma }
		clr_ruler_flag = sancaga_cikma
		every_owned_province = {
			limit = {
				has_province_modifier = heir_in_training
			}
			remove_province_modifier = heir_in_training
		}
	}
	if = {
		limit = { has_ruler_flag = returned_from_sancaga_sikma_province }
		clr_ruler_flag = returned_from_sancaga_sikma_province
	}
	if = {
		limit = {
			has_country_flag = death_of_albertines
			has_heir_flag = ladislaus_postumus
			STY = {
				dynasty = "von Habsburg"
			}
		}
		STY = {
			country_event = {
				id = ipeHAB.6
			}
		}
	}
	if = {
		limit = {
			has_country_flag = death_of_albertines
			has_heir_flag = ladislaus_postumus
			NOT = {
				has_country_flag = ladislaus_already_killed
			}
		}
		set_country_flag = ladislaus_already_killed
		country_event = {
			id = ipeHAB.1
		}
	}
	if = {
		limit = {
			has_country_flag = louis_in_exile
			has_heir_flag = ambitions_of_dauphin
		}
		country_event = {
			id = ipeFRA.28
		}
		random_known_country = {
			limit = {
				has_country_modifier = harboring_the_dauphin
			}
			hidden_effect = {
				country_event = {
					id = ipeFRA.29
				}
			}
		}
	}
	if = {
		limit = {
			tag = AYU
			has_heir_flag = trailokanat_sukhothai
			SUK = {
				has_ruler_flag = trailokanat_sukhothai
			}
		}
		SUK = {
			kill_ruler = yes
		}
	}
	if = {
		limit = { has_any_heir_cult_active = yes }
		remove_heir_cult = yes
	}
}

# country
on_queen_death = {

	if = {
		limit = { has_consort_flag = 10_years_anniversary }
		set_ruler_flag = had_10_years_anniversary
	}
	if = {
		limit = { has_consort_flag = 20_years_anniversary }
		set_ruler_flag = had_20_years_anniversary
	}
	if = {
		limit = { has_consort_flag = consort_has_affection_of_ruler }
		set_ruler_flag = consort_had_affection_of_ruler
	}

	if = {
		limit = {
			has_regency = no
			NOT = { has_ruler_flag = widow_widower }
		}
		set_ruler_flag = widow_widower
	}
	if = {
		limit = { has_consort_regency = no }
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = { has_ruler_flag = accepted_help_from_spouses_family }
		clr_ruler_flag = accepted_help_from_spouses_family
	}
	if = {
		limit = { has_ruler_flag = helped_spouses_family }
		clr_ruler_flag = helped_spouses_family
	}
	if = {
		limit = { has_ruler_flag = refused_to_help_spouses_family }
		clr_ruler_flag = refused_to_help_spouses_family
	}
	if = {
		limit = { has_ruler_flag = has_lowborn_consort }
		random_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = { has_ruler_flag = has_lowborn_consort }
		clr_ruler_flag = has_lowborn_consort
	}
	if = {
		limit = { has_country_modifier = consort_adm_advice }
		remove_country_modifier = consort_adm_advice
	}
	if = {
		limit = { has_country_modifier = consort_dip_advice }
		remove_country_modifier = consort_dip_advice
	}
	if = {
		limit = { has_country_modifier = consort_mil_advice }
		remove_country_modifier = consort_mil_advice
	}
	if = {
		limit = { has_country_modifier = without_spouse_advice }
		remove_country_modifier = without_spouse_advice
	}
	if = {
		limit = { has_ruler_modifier = affectionate_royal_couple }
		remove_country_modifier = affectionate_royal_couple
	}
	if = {
		limit = { has_ruler_modifier = bav_woman_scorned_mod }
		remove_country_modifier = bav_woman_scorned_mod
	}
	if = {
		limit = { has_ruler_modifier = bav_building_wife_church }
		remove_country_modifier = bav_building_wife_church
	}
	clr_ruler_flag = marriage_length
}

# country
on_new_heir = {
	if = {
		limit = { has_any_heir_cult_active = yes }
		remove_heir_cult = yes
	}
	if = {
		limit = {
			has_country_flag = enabled_cult_for_heirs
		}
		country_event = {
			id = fetishist_flavor.600
		}
	}
	if = {
		limit = {
			has_country_flag = had_bmv
		}
		clr_country_flag = had_bmv
	}
	if = {
		limit = {
			tag = AHM
		}
		set_heir_culture = kannada
	}
	if = {
		limit = {
			tag = BAH
			dynasty = "Bahman"
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = BAH
			NOT = {
				dynasty = "Bahman"
			}
		}
		set_heir_culture = turkish
	}
	if = {
		limit = {
			tag = BID
		}
		set_heir_culture = turkish
	}
	if = {
		limit = {
			tag = BIJ
		}
		set_heir_culture = turkish
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Ilyas Shah"
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Siddi"
		}
		set_heir_culture = siddi
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Hussein Shah"
		}
		set_heir_culture = hejazi_culture
	}
	if = {
		limit = {
			tag = BRR
		}
		set_heir_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			dynasty = "Bahman"
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = DEC
			was_tag = AHM
		}
		set_heir_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BID
		}
		set_heir_culture = turkish
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BIJ
		}
		set_heir_culture = turkish
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BRR
		}
		set_heir_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			was_tag = GOC
		}
		set_heir_culture = azerbaijani
	}
	if = {
		limit = {
			tag = DEC
			NOT = {
				dynasty = "Bahman"
				was_tag = AHM
				was_tag = BID
				was_tag = BIJ
				was_tag = BRR
			}
		}
		set_heir_culture = uzbehk
	}
	if = {
		limit = {
			tag = DLH
			NOT = {
				dynasty = "Sharqi"
			}
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = GOC
		}
		set_heir_culture = azerbaijani
	}
	if = {
		limit = {
			tag = GUJ
			dynasty = "Ahmad Shah"
		}
		set_heir_culture = panjabi
	}
	if = {
		limit = {
			OR = {
				tag = JNP
				was_tag = JNP
			}
			dynasty = "Sharqi"
		}
		set_heir_culture = siddi
	}
	if = {
		limit = {
			tag = KHD
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = IRQ
			dynasty = "Qara Qoyunlu"
		}
		set_heir_culture = azerbaijani
	}
	if = {
		limit = {
			tag = JAJ
		}
		set_heir_culture = siddi
	}
	if = {
		limit = {
			tag = KLP
		}
		set_heir_culture = turkish
	}
	if = {
		limit = {
			tag = KRK
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = KRM
			dynasty = "Ghunashirin"
		}
		set_heir_culture = kanauji
	}
	if = {
		limit = {
			tag = KSH
			dynasty = "Shah Miri"
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			is_subject_of = LIT
			dynasty = "Gediminai"
		}
		set_heir_culture = lithuanian
	}
	if = {
		limit = {
			tag = MLW
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			OR = {
				tag = MUG
				dynasty = "Gurkani"
			}
		}
		set_heir_culture = uzbehk
	}
	if = {
		limit = {
			tag = MUL
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = ODH
		}
		set_heir_culture = khorasani
	}
	if = {
		limit = {
			tag = RMP
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = SUR
			dynasty = "Suri"
		}
		set_heir_culture = afghani
	}
	if = {
		limit = {
			tag = YZD
			dynasty = "Yazdi"
		}
		set_heir_culture = al_misr_arabic
	}
}

# country
on_weak_heir_claim = {
	events = {
		611		# Pretenders rise up
	}
}

# country : no heir in theocracy
on_heir_needed_theocracy = {
	events = {
		theocracy.1
	}
}

# Emperor from same dynasty
on_successive_emperor = {
	emperor = {
		save_global_event_target_as = Emperor
	}
	events = {
		900
	}
}

# Called whenever a new emperor is elected
# FROM = Previous Emperor
# ROOT = New Emperor 
on_emperor_elected = {
	every_elector = {
		if = {
			limit = {
				preferred_emperor = root
			}
			change_variable = {
				which = supported_successive_emperors
				value = 1
			}
		}
		else = {
			set_variable = {
				which = supported_successive_emperors
				value = 0
			}
		}
	}

	emperor = {
		save_global_event_target_as = Emperor
	}
	FROM = {
		if = {
			limit = { has_country_modifier = diet_occupied }
			remove_country_modifier = diet_occupied
			ROOT = {
				add_country_modifier = { name = diet_occupied duration = -1 }
			}
		}
		if = {
			limit = {
				any_country = {
					reverse_has_opinion_modifier = {
						modifier = opinion_imperial_diplomacy
						who = prev
					}
				}
			}
			every_country = {
				limit = {
					reverse_has_opinion_modifier = {
						modifier = opinion_imperial_diplomacy
						who = prev
					}
				}
				reverse_remove_opinion = {
					modifier = opinion_imperial_diplomacy
					who = prev
				}
				ROOT = {
					add_opinion = {
						modifier = opinion_imperial_diplomacy
						who = prev
					}
				}
			}
		}
	}
}

# HRE Prince released by the emperor
on_released_hre_member = {
	events = {
	}
}

# HRE Prince converts to non-Emperor religion
on_hre_member_false_religion = {
	events = {
	}
}

# HRE Prince converts to Emperor religion
on_hre_member_true_religion = {
	events = {
	}
}

# Emperor wins HRE defensive war
on_hre_wins_defensive_war = {
	events = {
	}
}

# HRE member annexed by non-HRE country
on_hre_member_annexed = {
	events = {
	}
}

# HRE member released from non-HRE vassalage
on_hre_released_vassal = {
	events = {
	}
}

# HRE member transferred from non-HRE vassalage to Emperor
on_hre_transfered_vassal = {
	events = {
	}
}

# Emperor coming to the defense of a HRE member
on_hre_defense = {
	events = {
	}
}

# Emperor NOT coming to the defense of a HRE member
on_hre_non_defense = {
	events = {
		909
	}
}

# HRE Member takes a HRE province from an outs100e country in a peace (province scope)
on_hre_province_reconquest = {
	events = {
	}
}

on_lock_hre_religion = {
	events = {
		religious_leagues.1
		religious_leagues.8
	}
}

on_change_hre_religion = {
	events = {
		religious_leagues.2
		religious_leagues.3
	}
}

on_hre_religion_white_peace = {
	events = {
		religious_leagues.4
	}
}

# When a non-native changes government type
on_government_change = {
	clr_country_flag = pirate_mutineer_council
	clr_country_flag = caretaker_revolutionary_government
	if = {
		limit = {
			NOT = { government = monarchy }
			any_owned_province = {
				has_province_modifier = domain_of_spouses_family
			}
		}
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = {
			NOT = { government = monarchy }
			any_owned_province = {
				has_province_modifier = home_of_consort
			}
		}
		random_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = {
			OR = {
				tag = ENG
				tag = GBR
			}
			any_owned_province = {
				has_province_modifier = rotten_borough
			}
		}
		every_owned_province = {
			limit = {
				has_province_modifier = rotten_borough
			}
			remove_province_modifier = rotten_borough
		}
	}
	if = {
		limit = { has_country_modifier = the_reign_of_terror }
		remove_country_modifier = the_reign_of_terror
	}
	if = {
		limit = {
			has_global_flag = great_peasants_war_flag
			is_part_of_hre = yes
			has_reform = peasants_republic
		}
		1 = {
			change_variable = {
				which = GPW_counting_variable
				value = -3
			}
		}
	}
}

# When a native changes government after filling all their advancement groups.
on_native_change_government = {
}

# Nation is integrated after being in union
on_integrate = {
	events = {
		610
	}
}

# Nation annexed.
# FROM is the nation being annexed
on_annexed = {
	if = {
		limit = {
			FROM = {
				is_emperor_of_china = yes
			}
		}
		country_event = {
			id = celestial_empire_events.1
		}
	}
	on_annexed_estate_privileges_effect = yes
	FROM = {
		if = {
			limit = { is_emperor_of_china = yes }
			dismantle_empire_of_china = yes
			set_global_flag = empire_of_china_dismantled
		}
		if = {
			limit = { has_country_modifier = legatus_natus }
			remove_country_modifier = legatus_natus
			set_global_flag = no_legatus_natus
		}
		if = {
			limit = { has_country_modifier = primas_germaniae }
			remove_country_modifier = primas_germaniae
			set_global_flag = no_primas_germaniae
		}
	}
}

# When the chinese empire gets dismantled (e.g. when the emperor is annexed)
# FROM = Emperor, ROOT = Current Nation
on_chinese_empire_dismantled = {
	clear_global_event_target = EmperorOfChina
	events = {
	}
}

# When a nation gains the Mandate of Heaven (becomes the Emperor of China)
# FROM = Old Emperor, ROOT = New Emperor
on_mandate_of_heaven_gained = {
	save_global_event_target_as = EmperorOfChina
	china_superregion = {
		limit = {
			NOT = { is_core = ROOT }
		}
		add_core = ROOT
	}
	manchuria_region = {
		limit = {
			NOT = { is_core = ROOT }
			is_core = FROM
		}
		add_core = ROOT
	}
	mongolia_region = {
		limit = {
			NOT = { is_core = ROOT }
			is_core = FROM
		}
		add_core = ROOT
	}
	tibet_region = {
		limit = {
			NOT = { is_core = ROOT }
			is_core = FROM
		}
		add_core = ROOT
	}
	korea_region = {
		limit = {
			NOT = { is_core = ROOT }
			is_core = FROM
		}
		add_core = ROOT
	}
	if = {
		limit = {
			technology_group = nomad_group
		}
		change_technology_group = chinese
		change_unit_type = chinese
	}
	if = {
		limit = {
			OR = {
				NOT = { government = monarchy }
				government = tribal
			}
		}
		change_government_to_monarchy = yes
	}
	add_government_reform = celestial_empire
	set_mandate = 60
	set_meritocracy = 60
	add_country_modifier = {
		name = new_mandate_holder
		duration = 18250
	}
	if = {
		limit = {
			has_dlc = "Mandate of Heaven"
		}
		remove_faction = temples
		remove_faction = enuchs
		remove_faction = bureaucrats
	}
	if = {
		limit = {
			has_country_modifier = lost_mandate_of_heaven
		}
		remove_country_modifier = lost_mandate_of_heaven
	}
	country_event = { #The Empire of China
		id = ipe_ChineseEmpire.1
		days = 10
	}
	country_event = { #Reforming the Bureaucracy
		id = china_events.31
		days = 365
	}
	country_event = {
		id = china_events.32 #Records of the last Empire
		days = 219
	}
	country_event = {
		id = celestial_empire_events.2
		days = 1825
	}
	FROM = {
		every_subject_country = {
			limit = {
				OR = {
					is_subject_of_type = tributary_state
					is_subject_of_type = guard
				}
			}
			if = {
				limit = {
					is_subject_of_type = tributary_state
				}
				set_country_flag = new_chinese_tributary_state
			}
			if = {
				limit = {
					is_subject_of_type = guard
				}
				set_country_flag = new_chinese_guard
			}
			random_list = {
				20 = {
					country_event = { # A New Chinese Dynasty
						id = ipe_ChineseEmpire.6
						days = 73
					}
				}
				20 = {
					country_event = { # A New Chinese Dynasty
						id = ipe_ChineseEmpire.6
						days = 146
					}
				}
				20 = {
					country_event = { # A New Chinese Dynasty
						id = ipe_ChineseEmpire.6
						days = 219
					}
				}
				20 = {
					country_event = { # A New Chinese Dynasty
						id = ipe_ChineseEmpire.6
						days = 292
					}
				}
				20 = {
					country_event = { # A New Chinese Dynasty
						id = ipe_ChineseEmpire.6
						days = 365
					}
				}
			}
		}
	}
}

# When a nation loses the Mandate of Heaven
# FROM = New Emperor, ROOT = Old Emperor
on_mandate_of_heaven_lost = {
	remove_government_reform = celestial_empire
	set_government_rank = 2
	add_country_modifier = {
		name = lost_mandate_of_heaven
		duration = 36500	# 100 years
	}
	add_stability = -2
	if = {
		limit = {
			has_country_modifier = new_mandate_holder
		}
		remove_country_modifier = new_mandate_holder
	}
}

on_embrace_revolution = {
	if = {	
		limit = {
			any_subject_country = {
				has_country_modifier = colony_inspired_by_revolution
			}
		}
		every_subject_country = {
			remove_country_modifier = colony_inspired_by_revolution
		}
	}
	if = {
		limit = { NOT = { government = republic } }
		change_government_to_republic = yes
	}
	if = {
		limit = { 
			revolution_target_exists = no
			is_great_power = yes
		}
		set_revolution_target = ROOT
		add_government_reform = revolutionary_republic_reform
		if = {
			limit = {
				any_country = {
					has_country_flag = last_revolutionary_country
				}
			}
			every_country = {
				limit = {
					has_country_flag = last_revolutionary_country
				}
				clr_country_flag = last_revolutionary_country
			}
		}
	}
	else = {
		add_government_reform = junior_revolutionary_republic_reform
	}
	if = {
		limit = { has_reform = parliamentary_reform }
		remove_government_reform = parliamentary_reform
	}
	kill_ruler = yes
	set_country_flag = revolutionary_republic_flag
	set_country_flag = had_revolution
}

# THIS = Revolutionary country being beaten, FROM = Country enforcing the peace treaty
on_dismantle_revolution = {
	events = {
		center_of_revolution.1500
	}
	if = {
		limit = {
			any_country = {
				has_country_flag = last_revolutionary_country
			}
		}
		every_country = {
			limit = {
				has_country_flag = last_revolutionary_country
			}
			clr_country_flag = last_revolutionary_country
		}
	}
	set_country_flag = last_revolutionary_country
}

# province
on_adm_development = {
	FROM = {
		add_base_tax = -1
		add_province_modifier = {
			name = encouraged_growth_tax
			duration = 18250
		}
	}
}

# province
on_dip_development = {
	if = {
		limit = {
			FROM = {
				NOT = {
					OR = {
						trade_goods = gold
						trade_goods = silver
					}
				}
			}
		}
		FROM = {
			add_base_production = -1
			add_province_modifier = {
				name = encouraged_growth_production
				duration = 18250
			}
		}
	}
}

# province
on_mil_development = {
	FROM = {
		add_base_manpower = -1
		add_province_modifier = {
			name = encouraged_growth_manpower
			duration = 18250
		}
	}
}

on_overextension_pulse = {
	random_events = {
		100 = overextension.1
		100 = overextension.2
		100 = overextension.3
		100 = overextension.4
		100 = overextension.5
		100 = overextension.6
		100 = overextension.7
		100 = overextension.8
		100 = overextension.9
		100 = overextension.10
	}
}


on_colonial_pulse = {
	random_events = {
		100 = colonial.1
		100 = colonial.2
		100 = colonial.3
		100 = colonial.4
		100 = colonial.5
		100 = colonial.8
		100 = colonial.9
		100 = colonial.10
		100 = colonial.11
		100 = colonial.12
		100 = colonial.13
		100 = colonial.14
		100 = colonial.15
		100 = colonial.16
		100 = colonial.17
		100 = colonial.18
		25 = dodo.1

		15000 = 0
	}
}

on_siberian_pulse = {
}


# country random events
on_bi_yearly_pulse = {
	events = {
		center_of_revolution.2950
		center_of_revolution.3000
	}
	random_events = {
		# randomevents.txt
		100 = 3051
		100 = 5008
		100 = 5014
		100 = 5015
		100 = 5017
		100 = 5018
		100 = 5019
		100 = 5020
		100 = 5021
		100 = 5022
		100 = 5023
		100 = 5024
		100 = 5025
		100 = 5027
		100 = 5032
		100 = 5040
		100 = 5045
		100 = 5050
		100 = 5051
		100 = 5052
		100 = 5053
		10 = 5054
		100 = 5055
		100 = 5056
		100 = 5058
		100 = 5059
		100 = 5060
		100 = 5061
		100 = 5064
		100 = 5065
		100 = 5066
		100 = 5068
		100 = 5070
		100 = 5071
		100 = 5072
		100 = 5074
		100 = 5075
		100 = 5076
		100 = 5077
		100 = 5082
		100 = 5083
		100 = 5084
		100 = 5085
		100 = 5086
		100 = 5088
		100 = 5089
		100 = 5090
		100 = 5091
		100 = 5092
		100 = 5093
		100 = 5094
		100 = 5095
		10 = 5096
		100 = 5097
		100 = 5098
		100 = 5099
		100 = 6000
		100 = 6001
		100 = 6003
		100 = 6004
		100 = 6005
		100 = 6006
		100 = 6012
		100 = 6013
		100 = 6015
		100 = 710
		100 = 711
		100 = 712
		100 = 713
		100 = 714
		100 = 715
		100 = 716
		100 = 717
		100 = 718
		100 = 719
		100 = 720
		100 = 722
		100 = 723
		100 = 724
		100 = 725
		100 = 726
		100 = 727
		100 = 728
		100 = 729

		100 = random_event.1
		300 = random_event.2
		100 = random_event.3
		100 = random_event.4
		100 = random_event.5
		100 = random_event.6
		100 = random_event.7
		100 = random_event.8
		150 = random_event.9
		100 = random_event.10
		100 = random_event.11
		100 = random_event.12
		100 = random_event.13
		100 = random_event.14
		100 = random_event.15
		100 = random_event.16

		#Culture and Religion Events
		125 = culture_religion_events.1
		125 = culture_religion_events.3
		125 = culture_religion_events.4
		125 = culture_religion_events.5
		125 = culture_religion_events.6
		125 = culture_religion_events.7
		125 = culture_religion_events.8
		125 = culture_religion_events.9
		125 = culture_religion_events.10
		125 = culture_religion_events.11
		125 = culture_religion_events.12
		125 = culture_religion_events.13
		125 = culture_religion_events.14
		125 = culture_religion_events.15
		125 = culture_religion_events.16
		100 = culture_religion_events.17
		125 = culture_religion_events.18
		125 = culture_religion_events.19
		125 = culture_religion_events.20
		175 = culture_religion_events.21
		125 = culture_religion_events.22

		# Old Centralisation/Decentralisation
		100 = 806

		# Mercantilism
		100 = 6326
		100 = 6327
		100 = 6328
		100 = 6329

		# Trade Specific
		100 = trade.3
		100 = trade.4
		100 = trade.5
		100 = trade.6
		100 = trade.7
		100 = trade.8
		100 = trade.9
		100 = trade.10
		100 = trade.11
		100 = trade.12


		# Tradegoods events
		100 = 6418
		100 = 6419
		100 = 6420
		100 = 6421
		100 = 6422
		100 = 6423
		100 = 6424
		100 = 6425
		100 = 6426
		100 = 6427
		100 = 6428
		100 = 6429
		100 = 6431
		100 = 6432
		100 = 6433
		100 = 6434

		# Refoms, when having parliaments.
		100 = reforms.1
		100 = reforms.2
		100 = reforms.3
		100 = reforms.4

		100 = randomeventsstapehordes.1
		100 = randomeventsstapehordes.2
		100 = randomeventsstapehordes.3
		100 = randomeventsstapehordes.4
		100 = randomeventsstapehordes.5
		100 = randomeventsstapehordes.6
		100 = randomeventsstapehordes.7
		100 = randomeventsstapehordes.8
		100 = randomeventsstapehordes.13
		100 = randomeventsstapehordes.14
		100 = randomeventsstapehordes.17
		100 = randomeventsstapehordes.19
		100 = randomeventsstapehordes.20
		100 = randomeventsstapehordes.21
		100 = randomeventsstapehordes.22
		100 = randomeventsstapehordes.23
		100 = randomeventsstapehordes.24

		# Sailor events
		100 = sailor_event.1
		100 = sailor_event.2
		100 = sailor_event.3
		100 = sailor_event.4
		100 = sailor_event.5

		# Corruption Events
		50 = corruption_event.16
		50 = corruption_event.17
		50 = corruption_event.18
		50 = corruption_event.19
		50 = corruption_event.20


		# Institution Events
		#Feudalism Spread Events:
		150 = institution_events.8
		150 = institution_events.9
		150 = institution_events.10
		150 = institution_events.11
		#Global Trade Spread Events:
		150 = institution_events.50
		150 = institution_events.51
		150 = institution_events.52
		#Enlightenment Spread Events:
		150 = institution_events.70
		150 = institution_events.71
		150 = institution_events.72


		#Personality Events
		50 = personality_events.10 #Just Dilema
		50 = personality_events.11 #A righteous King
		50 = personality_events.12 #A Righteous Republican Ruler
		50 = personality_events.13
		50 = personality_events.14
		50 = personality_events.15
		50 = personality_events.16
		50 = personality_events.17
		50 = personality_events.18
		50 = personality_events.19
		50 = personality_events.20
		50 = personality_events.21
		50 = personality_events.22
		50 = personality_events.23
		50 = personality_events.24
		50 = personality_events.25
		50 = personality_events.26
		50 = personality_events.27
		50 = personality_events.28
		50 = personality_events.29
		50 = personality_events.30
		50 = personality_events.31
		50 = personality_events.32
		50 = personality_events.33
		50 = personality_events.34
		50 = personality_events.35
		50 = personality_events.36
		50 = personality_events.37
		50 = personality_events.38
		50 = personality_events.39
		50 = personality_events.40
		50 = personality_events.41
		50 = personality_events.42
		50 = personality_events.43
		50 = personality_events.44
		50 = personality_events.45
		50 = personality_events.46
		50 = personality_events.47
		50 = personality_events.48
		50 = personality_events.49
		50 = personality_events.50
		50 = personality_events.51
		50 = personality_events.52
		50 = personality_events.53
		50 = personality_events.54
		50 = personality_events.55
		50 = personality_events.56
		50 = personality_events.57
		50 = personality_events.58

		# Trade League Events
		100 = trade_league.1
		100 = trade_league.2
		100 = trade_league.3
		100 = trade_league.4
		100 = trade_league.7
		100 = trade_league.8
		100 = trade_league.9
		100 = trade_league.10
		100 = trade_league.11
		100 = trade_league.12
		100 = trade_league.13
		100 = trade_league.14

		#Industrial Revolution

		200 = industrialization_events.7
		200 = industrialization_events.8
		200 = industrialization_events.9
		200 = industrialization_events.10
		200 = industrialization_events.11
		200 = industrialization_events.12
		200 = industrialization_events.13
		200 = industrialization_events.14
		200 = industrialization_events.15
		200 = industrialization_events.16
		200 = industrialization_events.17
		200 = industrialization_events.18
		200 = industrialization_events.20
		200 = industrialization_events.21
		200 = industrialization_events.22

		#Confucian Events
		75 = confucian_events.19
		75 = confucian_events.20

		# Orthodox Icon Events
		75 = orthodox_icon_events.1
		75 = orthodox_icon_events.3
		75 = orthodox_icon_events.4
		75 = orthodox_icon_events.5
		75 = orthodox_icon_events.6

		2000 = 0 #was 1250
	}
}

on_bi_yearly_pulse_2 = {
	random_events = {
		50 = corruption_event.1
		50 = corruption_event.2
		50 = corruption_event.3
		50 = corruption_event.4
		50 = corruption_event.5
		50 = corruption_event.6
		50 = corruption_event.7
		50 = corruption_event.8
		50 = corruption_event.9
		50 = corruption_event.10
		50 = corruption_event.11
		50 = corruption_event.12
		50 = corruption_event.13
		50 = corruption_event.14
		50 = corruption_event.15

		4000 = 0
	}
}

on_bi_yearly_pulse_3 = {

	#Fire estate agenda if you have that privilege
	# NOTE DOING THIS THROUGH RANDOM EVENT NOW WITH estate_privileges_and_agendas_events.4 INSTEAD!
	#on_bi_yearly_pulse_estate_privileges_effect = yes

	events = {
		muslim_school_events.20 #Pick School
	}
	random_events = {
		100 = new_court_flavour_events.21 #religious resignation
		100 = new_court_flavour_events.25 #blood is thicker than water
		200 = 0
	}
}

on_bi_yearly_pulse_4 = {
	random_events = { #all these were shifted from on_bi_yearly_pulse_1
		#randomevents
		100 = 730
		100 = 731
		100 = 732
		100 = 733
		100 = 734
		100 = 735
		100 = 736
		100 = 737
		100 = 738
		100 = 739
		100 = 740
		100 = 741
		100 = 742

		100 = 850
		100 = 851
		100 = 852
		100 = 853
		100 = 854
		100 = 855
		100 = 857
		100 = 858
		100 = 859
		100 = 860
		100 = 861
		100 = 862
		100 = 863
		100 = 864
		100 = 865
		100 = 866
		100 = 867
		100 = 868
		100 = 869
		100 = 870
		100 = 871
		100 = 872
		100 = 873
		100 = 874
		100 = 875
		100 = 876
		100 = 877
		100 = 878
		100 = 879
		100 = 880
		100 = 881
		100 = 882
		100 = 883
		100 = 884
		100 = 885
		100 = 836
		100 = 837
		100 = 838

		100 = 9472
		100 = 3097
		100 = 5005
		100 = 5026
		100 = 5037
		100 = 5063
		100 = 6014


		# Innovativeness
		100 = innovativeness_events.1
		100 = innovativeness_events.2
		50 = innovativeness_events.3
		100 = innovativeness_events.4
		100 = innovativeness_events.5
		100 = innovativeness_events.6
		100 = innovativeness_events.7
		100 = innovativeness_events.8
		100 = innovativeness_events.9
		100 = innovativeness_events.10
		100 = innovativeness_events.11
		100 = innovativeness_events.12
		100 = innovativeness_events.13
		100 = innovativeness_events.14
		100 = innovativeness_events.15

		# Trade Company Investments
		100 = investment_events.1
		100 = investment_events.2
		100 = investment_events.4
		100 = investment_events.5
		100 = investment_events.6
		100 = investment_events.7
		100 = investment_events.8
		100 = investment_events.9
		100 = investment_events.10

		# Catholic Order Events
		100 = order_events.1
		100 = order_events.2
		100 = order_events.3
		100 = order_events.4
		100 = order_events.5
		100 = order_events.6
		100 = order_events.7
		100 = order_events.8
		100 = order_events.9

		# Minority Expulsion Events
		100 = expel_minority_events.1
		100 = expel_minority_events.2
		100 = expel_minority_events.3
		100 = expel_minority_events.4
		
		# Papal Tithe Events
		100 = curia.1
		100 = curia.2
		100 = curia.4
		100 = curia.9	
		100 = curia.10
		100 = curia.11
		100 = curia.12
		
		# Defender of the Faith
		100 = dotf.1
		100 = dotf.4
		100 = dotf.6
		100 = dotf.7
		
		# Mercenaries
		100 = mercs.1
		100 = mercs.2
		100 = mercs.3
		100 = mercs.4
		100 = mercs.7
		100 = mercs.7
		100 = mercs.8
		100 = mercs.10
		100 = mercs.11

		# Espionage
		100 = espionage_events.1
		100 = espionage_events.4
		100 = espionage_events.8
		80 = espionage_events.9

		#Reign of Terror
		150 = french_revolution.302
		100 = french_revolution.303
		
		# Papacy events
		100 = papacy_events.6

		# Professionalism
		100 = army_professionalism_events.4
		100 = army_professionalism_events.5
		75 = army_professionalism_events.6
		100 = army_professionalism_events.8
		100 = army_professionalism_events.9
		100 = army_professionalism_events.10
		100 = army_professionalism_events.11
		75 = army_professionalism_events.12
		100 = army_professionalism_events.13
		75 = army_professionalism_events.16

		# Agenda from the Estates
		1000 = estate_privileges_and_agendas_events.4

		# Burgundian events
		100 = ipeBUR.19

		2000 = 0
	}
}

on_bi_yearly_pulse_5 = {
	random_events = { #all these were shifted from on_bi_yearly_pulse_1
		# Anglican Events
		100 = anglican_events.1
		100 = anglican_events.2
		100 = anglican_events.3
		100 = anglican_events.4
		100 = anglican_events.5
		100 = anglican_events.6
		100 = anglican_events.7
		100 = anglican_events.8
		100 = anglican_events.9
		100 = anglican_events.10
		100 = anglican_events.11
		100 = anglican_events.12
		100 = anglican_events.13
		150 = anglican_events.15
		
		# Hussite Events
		100 = hussite.1
		100 = hussite.2
		100 = hussite.3
		100 = hussite.4
		100 = hussite.5
		100 = hussite.6
		100 = hussite.7


		#Mamluk Events

		175 = mamluk_events.1
		175 = mamluk_events.2
		175 = mamluk_events.3
		235 = mamluk_events.4
		185 = mamluk_events.5
		175 = mamluk_events.6
		250 = mamluk_events.7
		185 = mamluk_events.10
		185 = mamluk_events.11
		235 = mamluk_events.12

		#Colonization of Siberia
		125 = siberian_events.2
		125 = siberian_events.3
		125 = siberian_events.4
		125 = siberian_events.5
		125 = siberian_events.6

		#Russian Principalities

		125 = russian_principality_events.2
		125 = russian_principality_events.3
		125 = russian_principality_events.4
		125 = russian_principality_events.7
		75 = russian_principality_events.9
		125 = russian_principality_events.10

		#Tsardoms

		125 = russian_tsardom_events.1
		125 = russian_tsardom_events.2
		100 = russian_tsardom_events.4
		125 = russian_tsardom_events.5
		100 = russian_tsardom_events.6
		100 = russian_tsardom_events.7
		100 = russian_tsardom_events.8
		125 = russian_tsardom_events.9
		125 = russian_tsardom_events.10
		100 = russian_tsardom_events.11

		#Streltsy Events
		125 = streltsy_events.1
		125 = streltsy_events.3
		125 = streltsy_events.4
		125 = streltsy_events.5
		100 = streltsy_events.6

		#Orthodox Metropolitans
		125 = patriarch_events.1
		125 = patriarch_events.2
		125 = patriarch_events.3
		75 = patriarch_events.4
		75 = patriarch_events.5

		# Catholic  Events
		100 = catholic_flavor.4
		100 = catholic_flavor.5
		100 = catholic_flavor.6
		100 = catholic_flavor.7
		100 = catholic_flavor.8
		100 = catholic_flavor.9
		100 = catholic_flavor.10

		# Japanese Daimyos
		50 = flavor_jap.28
		100 = flavor_jap.40
		100 = flavor_jap.42
		100 = flavor_jap.43
		100 = flavor_jap.45
		100 = flavor_jap.49
		100 = flavor_jap.51
		100 = flavor_jap.52
		100 = flavor_jap.53
		100 = flavor_jap.54
		100 = flavor_jap.55



		# China
		75 = meritocracy_events.1
		75 = meritocracy_events.2
		75 = meritocracy_events.3
		75 = meritocracy_events.4
		75 = meritocracy_events.5
		50 = china_events.11
		25 = china_events.12
		25 = china_events.24
		75 = ipe_ChineseEmpire.4
		75 = ipe_ChineseEmpire.3 # War with the Emperor of China

		100 = ipeJAP.86
		100 = ipeJAP.87
		100 = ipeJAP.88
		100 = ipeJAP.89
		100 = ipeJAP.90
		100 = ipeJAP.91
		100 = ipeJAP.92

		100 = ipeBAH.4 # Plight of the Bahmani Pilgrims
		100 = ipeBAH.7 # A New Arrival in Court
		100 = ipeBAH.8 # The Anger of the Deccanis
		100 = ipeBAH.9 # The Anger of the Gharbians

		2000 = 0
	}
}



# country random events
on_thri_yearly_pulse = {
	random_events = {
		# Republics
		100 = republics.4
		100 = republics.5
		100 = republics.6
		100 = republics.7
		100 = republics.8
		100 = republics.9
		100 = republics.10
		100 = republics.11
		100 = republics.12
		100 = republics.13
		100 = republics.14
		100 = republics.15
		100 = republics.16
		100 = republics.17
		100 = republics.18
		100 = republics.19
		100 = republics.20
		100 = republics.21
		100 = republics.22
		100 = republics.23
		100 = republics.24
		100 = republics.25
		100 = republics.26
		100 = republics.27
		100 = republics.28
		100 = republics.29
		100 = republics.30
		100 = republics.31
		100 = republics.32
		100 = republics.33
		100 = republics.34
		100 = republics.35
		100 = republics.36
		100 = republics.37
		100 = republics.38
		100 = republics.39
		100 = republics.40
		100 = republics.41
		100 = republics.42
		100 = republics.43

		# Theocracies
		100 = devotion_events.1
		100 = devotion_events.2
		100 = devotion_events.3
		100 = devotion_events.4
		100 = devotion_events.5
		100 = devotion_events.6
		100 = devotion_events.7
		100 = devotion_events.8
		100 = devotion_events.9
		100 = devotion_events.10
		100 = devotion_events.11
		100 = devotion_events.12
		100 = devotion_events.13
		100 = devotion_events.14
		100 = devotion_events.15
		100 = devotion_events.16
		100 = devotion_events.18
		100 = devotion_events.19
		100 = devotion_events.22
		100 = devotion_events.23
		100 = devotion_events.24
		100 = devotion_events.26
		100 = devotion_events.100
		100 = devotion_events.101
		100 = devotion_events.102
		100 = devotion_events.104
		100 = devotion_events.107
		100 = devotion_events.110
		100 = devotion_events.117
		100 = devotion_events.118
		100 = devotion_events.119
		100 = devotion_events.200
		100 = devotion_events.201
		100 = devotion_events.202
		100 = devotion_events.203
		100 = devotion_events.204
		100 = devotion_events.205
		100 = devotion_events.207
		100 = devotion_events.208
		100 = devotion_events.209
		100 = devotion_events.210
		100 = devotion_events.211
		100 = devotion_events.212
		100 = devotion_events.213
		100 = devotion_events.214
		100 = devotion_events.215
		100 = devotion_events.216
		100 = devotion_events.217
		100 = devotion_events.218
		100 = devotion_events.219



		#Center of Revolution - post-spawn (higher weighting than others as they are only relevant briefly)
		200 = center_of_revolution.1
		150 = center_of_revolution.2
		200 = center_of_revolution.3
		200 = center_of_revolution.8
		250 = center_of_revolution.9
		250 = center_of_revolution.10
		200 = center_of_revolution.12
		#Center of Revolution - pre-spawn
		100 = center_of_revolution.2000
		100 = center_of_revolution.2002
		100 = center_of_revolution.2003
		100 = center_of_revolution.2010

		1000 = 0
	}
}

on_thri_yearly_pulse_2 = {
	random_events = {
		# Random to increase or decrease patriarch authority.
		25 = orthodox_flavor.1
		20 = orthodox_flavor.2
		25 = orthodox_flavor.3
		25 = orthodox_flavor.4
		25 = orthodox_flavor.5

		# Muslim Piety Events
		40 = muslim_piety.1
		40 = muslim_piety.2
		40 = muslim_piety.3
		20 = muslim_piety.4
		20 = muslim_piety.5
		40 = muslim_piety.6
		40 = muslim_piety.7
		40 = muslim_piety.8
		40 = muslim_piety.9
		40 = muslim_piety.10
		40 = muslim_piety.11
		40 = muslim_piety.12
		40 = muslim_piety.13
		40 = muslim_piety.14
		40 = muslim_piety.15
		40 = muslim_piety.16
		40 = muslim_piety.22
		300 = 0
	}
}

on_thri_yearly_pulse_3 = {
	random_events = {
		# Subject Interactions
		50 = subject_interaction_events.1
		50 = subject_interaction_events.4
		50 = subject_interaction_events.5
		50 = subject_interaction_events.6
		50 = subject_interaction_events.7
		50 = subject_interaction_events.9
		50 = subject_interaction_events.11
		50 = subject_interaction_events.14
		50 = subject_interaction_events.15
		50 = subject_interaction_events.17
		50 = subject_interaction_events.18
		50 = subject_interaction_events.19
		50 = subject_interaction_events.20
		50 = subject_interaction_events.21
		50 = subject_interaction_events.22
		50 = subject_interaction_events.23
		50 = subject_interaction_events.24
		50 = subject_interaction_events.25
		50 = subject_interaction_events.26
		50 = subject_interaction_events.27
		50 = subject_interaction_events.29
		50 = subject_interaction_events.30
		50 = subject_interaction_events.31
		50 = subject_interaction_events.32
		50 = subject_interaction_events.34
		50 = subject_interaction_events.35
		50 = subject_interaction_events.36
		50 = subject_interaction_events.38
		50 = subject_interaction_events.43
		75 = tributary_events.1
		75 = tributary_events.2
		75 = tributary_events.3
		75 = tributary_events.4
		75 = tributary_events.5
		75 = tributary_events.6
		75 = tributary_events.7
		75 = tributary_events.8
		75 = tributary_events.9
		75 = tributary_events.10
		75 = tributary_events.13
		75 = tributary_events.16
		75 = tributary_events.17
		75 = tributary_events.19
		75 = tributary_events.23
		75 = tributary_events.24
		75 = tributary_events.26
		75 = tributary_events.25
		75 = tributary_events.27

		1000 = 0
	}
}

on_thri_yearly_pulse_4 = {
	random_events = {
		#Low Mandate Events
		10 = china_events.45
		50 = china_events.47
		10 = china_events.48
		10 = china_events.49
		10 = china_events.50
		50 = china_events.51
		10 = china_events.53
		50 = china_events.54
		#10 = china_events.55 (triggers via neighbors)
		10 = china_events.56
		75 = china_events.57
		50 = china_events.58
		10 = china_events.59
		50 = china_events.60
	}
}

on_four_year_pulse = {
	random_events = {
		# Colonial Nations
		100 = colonial_nation.1
		100 = colonial_nation.4
		100 = colonial_nation.10
		100 = colonial_nation.12
		100 = colonial_nation.14
		100 = colonial_nation.77
		100 = colonial_nation.100
		100 = colonial_nation.102
		100 = colonial_nation.104
		100 = colonial_nation.106
		100 = colonial_nation.108
		100 = colonial_nation.110
		100 = colonial_nation.112
		100 = colonial_nation.114
		100 = colonial_nation.116
		100 = colonial_nation.118
		100 = colonial_nation.120
		100 = colonial_nation.122
		100 = colonial_nation.124
		100 = colonial_nation.126
		100 = colonial_nation.128
		100 = colonial_nation.130
		100 = colonial_nation.132
		100 = colonial_nation.134
		100 = colonial_nation.182
		100 = colonial_nation.183
		100 = colonial_nation.184
		100 = colonial_nation.185
		100 = colonial_nation.186
		100 = colonial_nation.187
		100 = colonial_nation.188
		100 = colonial_nation.189
		10 = colonial_nation.140
		10 = colonial_nation.142
		10 = colonial_nation.144
		10 = colonial_nation.146
		10 = colonial_nation.148
		10 = colonial_nation.150
		10 = colonial_nation.152
		10 = colonial_nation.154
		10 = colonial_nation.156
		10 = colonial_nation.158
		10 = colonial_nation.160
		10 = colonial_nation.162
		10 = colonial_nation.164
		10 = colonial_nation.166
		10 = colonial_nation.168
		10 = colonial_nation.170
		10 = colonial_nation.172
		10 = colonial_nation.174
		10 = colonial_nation.176
		10 = ipe_slavery.6

		# Dutch Republic
		100 = dutch_republic.1
		100 = dutch_republic.2
		100 = dutch_republic.3
		100 = dutch_republic.4
		100 = dutch_republic.5
		100 = dutch_republic.6
		100 = dutch_republic.7
		100 = dutch_republic.8
		100 = dutch_republic.9
		100 = dutch_republic.10
		150 = dutch_republic.11
		100 = dutch_republic.13
		100 = dutch_republic.14
		100 = dutch_republic.15
		100 = dutch_republic.16
		100 = dutch_republic.17
		100 = dutch_republic.18
		100 = dutch_republic.19
		100 = dutch_republic.20
		100 = dutch_republic.21
		100 = dutch_republic.22
		100 = dutch_republic.23
		100 = dutch_republic.24
		100 = dutch_republic.25
		100 = dutch_republic.27

		# Republic Factions
		100 = republic_factions.2
		100 = republic_factions.5
		100 = republic_factions.7
		100 = republic_factions.9
		100 = republic_factions.10
		100 = republic_factions.12
		100 = republic_factions.13
		100 = republic_factions.14
		100 = republic_factions.15
		100 = republic_factions.16
		100 = republic_factions.17
		100 = republic_factions.18
		100 = republic_factions.19
		100 = republic_factions.20
		100 = republic_factions.22
		100 = republic_factions.23
		100 = republic_factions.24

		# Revolutionary Republic Factions

		100 = revolutionary_republic_factions.0
		100 = revolutionary_republic_factions.1
		100 = revolutionary_republic_factions.2
		100 = revolutionary_republic_factions.3
		100 = revolutionary_republic_factions.4
		100 = revolutionary_republic_factions.5
		100 = revolutionary_republic_factions.6
		100 = revolutionary_republic_factions.7
		100 = revolutionary_republic_factions.8
		100 = revolutionary_republic_factions.9

		# Revolutionary Empires
		100 = napoleon.1
		100 = napoleon.2

		# Pirate Factions
		100 = pirates.10
		100 = pirates.11
		100 = pirates.12
		100 = pirates.13
		100 = pirates.14
		100 = pirates.15
		100 = pirates.16
		100 = pirates.17
		100 = pirates.18
		100 = pirates.19

		# Republican Dictatorship
		100 = republican_dictatorship.1
		100 = republican_dictatorship.2
		100 = republican_dictatorship.3
		100 = republican_dictatorship.4
		100 = republican_dictatorship.5
		100 = republican_dictatorship.6
		100 = republican_dictatorship.7
		100 = republican_dictatorship.8

		# Elective Monarchy
		150 = elective_monarchy.1
		150 = elective_monarchy.2
		25 = elective_monarchy.3
		25 = elective_monarchy.4
		150 = elective_monarchy.6
		150 = elective_monarchy.8
		150 = elective_monarchy.9
		150 = elective_monarchy.10
		150 = elective_monarchy.11
		150 = elective_monarchy.12
		150 = elective_monarchy.14
		150 = elective_monarchy.17
		25 = elective_monarchy.18

		# Free Cities
		25 = free_cities.3
		25 = free_cities.8
		25 = free_cities.10
		25 = free_cities.13
		25 = free_cities.17
		25 = free_cities.19

		#Tribal Federations
		50 = tribal_federation_events.1
		50 = tribal_federation_events.2
		50 = tribal_federation_events.3
		50 = tribal_federation_events.4
		50 = tribal_federation_events.5
		50 = tribal_federation_events.6
		50 = tribal_federation_events.7
		50 = tribal_federation_events.8
		50 = tribal_federation_events.10

		#Empire of China
		100 = china_events.1
		100 = china_events.2
		100 = china_events.3
		100 = china_events.4
		100 = china_events.6
		100 = china_events.7
		100 = china_events.8
		100 = china_events.9
		100 = china_events.10
		100 = china_events.11
		100 = china_events.12
		100 = china_events.13
		100 = china_events.14
		100 = china_events.15
		100 = china_events.16
		100 = china_events.17
		100 = china_events.18
		100 = china_events.19
		100 = china_events.21
		100 = china_events.22
		100 = china_events.23
		100 = china_events.24
		100 = china_events.25
		100 = china_events.26
		100 = china_events.27
		100 = china_events.28
		100 = china_events.29
		100 = china_events.30
		100 = china_events.33
		100 = china_events.34
		100 = china_events.35
		100 = china_events.36
		100 = china_events.37
		100 = china_events.38
		100 = china_events.39
		50 = china_events.40
		100 = china_events.41
		100 = china_events.42
		100 = china_events.44

		10 = tortoise.1 # Galapagos Island Tortoises

		100 = flavor_pue.5
		
		#Totemism Events
		100 = totemism_flavor.1
		100 = totemism_flavor.7
		100 = totemism_flavor.8
		100 = totemism_flavor.10
		100 = totemism_flavor.11
		100 = totemism_flavor.13
		100 = totemism_flavor.14
		100 = totemism_flavor.15
		100 = totemism_flavor.16
		100 = totemism_flavor.17

		1000 = 0
	}
}

on_four_year_pulse_2 = {
	random_events = {
		100 = ipeMNG.3
	}
}

on_four_year_pulse_3 = {
	random_events = {
		100 = ipeMNG.9
	}
}

on_four_year_pulse_4 = {
}

on_five_year_pulse = {
	random_events = {

		# Innovativeness Events

		100 = innovativeness_events.1

		# Aristocracy 		13  (8g 5b)
		100 = ideagroups.100
		100 = ideagroups.101
		100 = ideagroups.102
		100 = ideagroups.103
		100 = ideagroups.104
		100 = ideagroups.105
		100 = ideagroups.106
		100 = ideagroups.107
		100 = ideagroups.108
		100 = ideagroups.109
		100 = ideagroups.110
		100 = ideagroups.111
		100 = ideagroups.112


		# Plutocracy 		19 (12g 7b)
		100 = ideagroups.200
		100 = ideagroups.201
		100 = ideagroups.202
		100 = ideagroups.203
		100 = ideagroups.204
		100 = ideagroups.205
		100 = ideagroups.206
		100 = ideagroups.207
		100 = ideagroups.208
		100 = ideagroups.209
		100 = ideagroups.210
		100 = ideagroups.211
		100 = ideagroups.212
		100 = ideagroups.213
		100 = ideagroups.214
		100 = ideagroups.215
		100 = ideagroups.216
		100 = ideagroups.217
		100 = ideagroups.218

		# Innovativenes		11 (7g 4b)
		100 = ideagroups.300
		100 = ideagroups.301
		100 = ideagroups.302
		100 = ideagroups.303
		100 = ideagroups.304
		100 = ideagroups.305
		100 = ideagroups.306
		100 = ideagroups.307
		100 = ideagroups.308
		100 = ideagroups.309
		100 = ideagroups.310

		# Religious		18 (11g 7b)
		100 = ideagroups.400
		100 = ideagroups.401
		100 = ideagroups.402
		100 = ideagroups.403
		100 = ideagroups.404
		100 = ideagroups.405
		100 = ideagroups.406
		100 = ideagroups.407
		100 = ideagroups.408
		100 = ideagroups.409
		100 = ideagroups.410
		100 = ideagroups.411
		100 = ideagroups.412
		100 = ideagroups.413
		100 = ideagroups.414
		100 = ideagroups.415
		100 = ideagroups.416
		100 = ideagroups.417


		# Spy			9 (6g 3b)
		100 = ideagroups.500
		100 = ideagroups.501
		100 = ideagroups.502
		100 = ideagroups.503
		100 = ideagroups.504
		100 = ideagroups.505
		100 = ideagroups.506
		100 = ideagroups.507
		100 = ideagroups.508


		# Diplomatic		9 (6g 3b)
		100 = ideagroups.600
		100 = ideagroups.601
		100 = ideagroups.602
		100 = ideagroups.603
		100 = ideagroups.604
		100 = ideagroups.605
		100 = ideagroups.606
		100 = ideagroups.607
		100 = ideagroups.608


		# Offensive 		14 (9g 5b)
		100 = ideagroups.700
		100 = ideagroups.701
		100 = ideagroups.702
		100 = ideagroups.703
		100 = ideagroups.704
		100 = ideagroups.705
		100 = ideagroups.706
		100 = ideagroups.707
		100 = ideagroups.708
		100 = ideagroups.709
		100 = ideagroups.710
		100 = ideagroups.711
		100 = ideagroups.712
		100 = ideagroups.713


		# Defensive		11 (5g 6b)
		100 = ideagroups.800
		100 = ideagroups.801
		100 = ideagroups.802
		100 = ideagroups.803
		100 = ideagroups.804
		100 = ideagroups.805
		100 = ideagroups.806
		100 = ideagroups.807
		100 = ideagroups.808
		100 = ideagroups.809
		100 = ideagroups.810
		100 = ideagroups.811
		100 = ideagroups.812
		100 = ideagroups.813
		100 = ideagroups.814
		100 = ideagroups.815


		# Trade			6 (7g 4b)
		100 = ideagroups.900
		100 = ideagroups.901
		100 = ideagroups.902
		100 = ideagroups.903
		100 = ideagroups.904
		100 = ideagroups.905
		100 = ideagroups.906
		100 = ideagroups.907
		100 = ideagroups.908
		100 = ideagroups.909
		100 = ideagroups.910

		# Maritime			22 (14g 8b)
		100 = ideagroups.1000
		100 = ideagroups.1001
		100 = ideagroups.1002
		100 = ideagroups.1003
		100 = ideagroups.1004
		100 = ideagroups.1005
		100 = ideagroups.1006
		100 = ideagroups.1007
		100 = ideagroups.1008
		100 = ideagroups.1009
		100 = ideagroups.1010
		100 = ideagroups.1011
		100 = ideagroups.1012
		100 = ideagroups.1013
		100 = ideagroups.1014
		100 = ideagroups.1015
		100 = ideagroups.1016
		100 = ideagroups.1017
		100 = ideagroups.1018
		100 = ideagroups.1019
		100 = ideagroups.1020
		100 = ideagroups.1021

		# Economic		11 (7g 4b)
		100 = ideagroups.1100
		100 = ideagroups.1101
		100 = ideagroups.1102
		100 = ideagroups.1103
		100 = ideagroups.1104
		100 = ideagroups.1105
		100 = ideagroups.1106
		100 = ideagroups.1107
		100 = ideagroups.1108
		100 = ideagroups.1109
		100 = ideagroups.1110

		# Exploration		11 (7g 4b)
		100 = ideagroups.1200
		100 = ideagroups.1201
		100 = ideagroups.1202
		100 = ideagroups.1203
		100 = ideagroups.1204
		100 = ideagroups.1205
		100 = ideagroups.1206
		100 = ideagroups.1207
		100 = ideagroups.1208
		100 = ideagroups.1209
		100 = ideagroups.1210

		# Quality		11 (7g 4b)
		100 = ideagroups.1300
		100 = ideagroups.1301
		100 = ideagroups.1302
		100 = ideagroups.1303
		100 = ideagroups.1304
		100 = ideagroups.1305
		100 = ideagroups.1306
		100 = ideagroups.1307
		100 = ideagroups.1308
		100 = ideagroups.1309
		100 = ideagroups.1310

		# Quantity		11 (7g 4b)
		100 = ideagroups.1400
		100 = ideagroups.1401
		100 = ideagroups.1402
		100 = ideagroups.1403
		100 = ideagroups.1404
		100 = ideagroups.1405
		100 = ideagroups.1406
		100 = ideagroups.1407
		100 = ideagroups.1408
		100 = ideagroups.1409
		100 = ideagroups.1410


		# Expansion		11 (7g 4b)
		100 = ideagroups.1500
		100 = ideagroups.1501
		100 = ideagroups.1502
		100 = ideagroups.1503
		100 = ideagroups.1504
		100 = ideagroups.1505
		100 = ideagroups.1506
		100 = ideagroups.1507
		100 = ideagroups.1508
		100 = ideagroups.1509
		100 = ideagroups.1510

		# Administrative	3 (1g 2b)
		100 = ideagroups.1600
		100 = ideagroups.1601
		100 = ideagroups.1602
		100 = ideagroups.1603
		100 = ideagroups.1604
		100 = ideagroups.1605
		100 = ideagroups.1606
		100 = ideagroups.1607
		100 = ideagroups.1608
		100 = ideagroups.1609
		100 = ideagroups.1610

		# Naval		11 (7g 4b)
		100 = ideagroups.1700
		100 = ideagroups.1701
		100 = ideagroups.1702
		100 = ideagroups.1703
		100 = ideagroups.1704
		100 = ideagroups.1705
		100 = ideagroups.1706
		100 = ideagroups.1707
		100 = ideagroups.1708
		100 = ideagroups.1709
		100 = ideagroups.1710

		# Influence		11 (7g 4b)
		100 = ideagroups.1800
		100 = ideagroups.1801
		100 = ideagroups.1802
		100 = ideagroups.1803
		100 = ideagroups.1804
		100 = ideagroups.1805
		100 = ideagroups.1806
		100 = ideagroups.1807
		100 = ideagroups.1808
		100 = ideagroups.1809
		100 = ideagroups.1810

		# Humanist		11 (7g 4b)
		100 = ideagroups.1900
		100 = ideagroups.1901
		100 = ideagroups.1902
		100 = ideagroups.1903
		100 = ideagroups.1904
		100 = ideagroups.1905
		100 = ideagroups.1906
		100 = ideagroups.1907
		100 = ideagroups.1908
		100 = ideagroups.1909
		100 = ideagroups.1910

		# Horde Ideas		10 (8g 2b)
		100 = ideagroups.1922
		100 = ideagroups.1923
		100 = ideagroups.1924
		100 = ideagroups.1925
		100 = ideagroups.1926
		100 = ideagroups.1927
		100 = ideagroups.1928
		100 = ideagroups.1929
		100 = ideagroups.1930
		100 = ideagroups.1931
		
		#Theocracy Ideas		11 (9g 2b)
		100 = ideagroups.1911
		100 = ideagroups.1912
		100 = ideagroups.1913
		100 = ideagroups.1914
		100 = ideagroups.1915
		100 = ideagroups.1916
		100 = ideagroups.1917
		100 = ideagroups.1918
		100 = ideagroups.1919
		100 = ideagroups.1920
		100 = ideagroups.1921

		# Indigenous		10 (6g 4b)
		100 = ideagroups.1932
		100 = ideagroups.1933
		100 = ideagroups.1934
		100 = ideagroups.1935
		100 = ideagroups.1936
		100 = ideagroups.1937
		100 = ideagroups.1938
		100 = ideagroups.1939
		100 = ideagroups.1940
		100 = ideagroups.1941
		
		1000 = 0
	}

	events = {
		seven_cities_events.1000 #Clearing of Seven Cities Hunt when goal is no longer possible
	}
}


# Estates pulse
on_five_year_pulse_2 = {
	random_events = {
		# Burghers
		100 = burghers_estate_events.1
		100 = burghers_estate_events.2
		100 = burghers_estate_events.3
		100 = burghers_estate_events.4
		100 = burghers_estate_events.5
		100 = burghers_estate_events.6
		100 = burghers_estate_events.7
		100 = burghers_estate_events.8
		100 = burghers_estate_events.9
		400 = burghers_estate_events.10 #Demands
		100 = burghers_estate_events.11 #Bonus
		100 = burghers_estate_events.12
		100 = burghers_estate_events.13
		400 = burghers_estate_events.14 #Demands
		100 = burghers_estate_events.15 #Disloyal
		# Nobles
		100 = nobles_estate_events.1 #Demands
		100 = nobles_estate_events.2
		100 = nobles_estate_events.3
		100 = nobles_estate_events.4
		400 = nobles_estate_events.5 #Demands
		100 = nobles_estate_events.6
		100 = nobles_estate_events.7
		400 = nobles_estate_events.8 #Disloyal
		400 = nobles_estate_events.9 #Disloyal
		50 = nobles_estate_events.10
		100 = nobles_estate_events.11 #Bonus
		# Clergy
		100 = church_estate_events.1
			#Regional Variations:
			100 = church_estate_events.101
			100 = church_estate_events.102
			100 = church_estate_events.103
			100 = church_estate_events.104
			100 = church_estate_events.105
		100 = church_estate_events.2
		100 = church_estate_events.3
		100 = church_estate_events.4
		400 = church_estate_events.5 #Disloyal
		400 = church_estate_events.6 #Demands
		100 = church_estate_events.7 #Bonus
		100 = church_estate_events.8
		100 = church_estate_events.9
		100 = church_estate_events.10
		# Dhimmi
		100 = dhimmi_estate_events.1
		400 = dhimmi_estate_events.2 #Demands
		100 = dhimmi_estate_events.3
		100 = dhimmi_estate_events.4
		100 = dhimmi_estate_events.5
		100 = dhimmi_estate_events.6
		400 = dhimmi_estate_events.7 #Disloyal
		100 = dhimmi_estate_events.8
		# Cossacks
		100 = cossack_estate_events.1
		#100 = cossack_estate_events.2 (triggers in neighbor country)
		100 = cossack_estate_events.6
		100 = cossack_estate_events.7
		100 = cossack_estate_events.8
		100 = cossack_estate_events.9
		100 = cossack_estate_events.10
		100 = cossack_estate_events.11
		400 = cossack_estate_events.12 #Disloyal
		100 = cossack_estate_events.13
		400 = cossack_estate_events.14 #Demands
		# Tribes
		100 = tribal_estate_events.1
		100 = tribal_estate_events.2
		100 = tribal_estate_events.3
		100 = tribal_estate_events.4
		100 = tribal_estate_events.5
		100 = tribal_estate_events.6
		100 = tribal_estate_events.7
		100 = tribal_estate_events.8
		100 = tribal_estate_events.9
		150 = tribal_estate_events.11 #Demands
		150 = tribal_estate_events.12 #Demands
		150 = tribal_estate_events.13 #Demands
		150 = tribal_estate_events.14 #Demands
		# Marathas
		100 = marathas_estate_events.2
		100 = marathas_estate_events.3
		100 = marathas_estate_events.4
		100 = marathas_estate_events.5
		100 = marathas_estate_events.6
		400 = marathas_estate_events.7 # Demands
		100 = marathas_estate_events.8
		100 = marathas_estate_events.9
		100 = marathas_estate_events.10
		400 = marathas_estate_events.11 # Disloyal
		# Brahmins
		400 = brahmins_estate_events.2 # demands
		100 = brahmins_estate_events.3
		100 = brahmins_estate_events.4
		100 = brahmins_estate_events.5
		400 = brahmins_estate_events.6 # disloyal
		100 = brahmins_estate_events.7
		100 = brahmins_estate_events.8
		100 = brahmins_estate_events.9
		100 = brahmins_estate_events.10
		100 = brahmins_estate_events.11
		# Jains
		100 = jains_estate_events.2
		100 = jains_estate_events.3
		100 = jains_estate_events.4
		100 = jains_estate_events.5
		100 = jains_estate_events.6
		100 = jains_estate_events.7
		400 = jains_estate_events.8 # Disloyal
		100 = jains_estate_events.9
		400 = jains_estate_events.10 # Demands
		100 = jains_estate_events.11
		# Vaishyas
		100 = vaisyas_estate_events.2
		100 = vaisyas_estate_events.3
		100 = vaisyas_estate_events.4
		100 = vaisyas_estate_events.5
		100 = vaisyas_estate_events.6
		100 = vaisyas_estate_events.7
		100 = vaisyas_estate_events.8
		400 = vaisyas_estate_events.9
		100 = vaisyas_estate_events.10
		100 = vaisyas_estate_events.11
		# Rajputs
		100 = rajputs_estate_events.2
		100 = rajputs_estate_events.3
		100 = rajputs_estate_events.4
		100 = rajputs_estate_events.5
		400 = rajputs_estate_events.6
		100 = rajputs_estate_events.7
		400 = rajputs_estate_events.8
		100 = rajputs_estate_events.9
		100 = rajputs_estate_events.10
		100 = rajputs_estate_events.11
		# Janissaries
		100 = ipeTUR.53
		100 = ipeTUR.54
		# Mamluks
		100 = ipeMAM.2
		100 = ipeMAM.3
		100 = ipeMAM.4
		# Random
		5 = flavor_fra.9500
		1000 = 0
	}
}

on_five_year_pulse_3 = {
	random_events = {
		100 = propagate_religion_events.1
		100 = propagate_religion_events.2
		100 = propagate_religion_events.3
		100 = propagate_religion_events.4
		100 = propagate_religion_events.5
		100 = propagate_religion_events.6
		100 = propagate_religion_events.8
		100 = propagate_religion_events.9
		100 = propagate_religion_events.10
		1000 = 0
	}
}

on_five_year_pulse_4 = {
	if = { #fail-safe for flavor_pap.7, making religious leagues happen at some point if there is no PAP
		limit = {
			is_year = 1610
			NOT = { exists = PAP }
			NOT = { has_global_flag = counter_reformation }
		}
		set_global_flag = counter_reformation
	}
	#fail-safe if for whatever reason these flags stay after being used in events
	if = {
		limit = {
			had_country_flag = {
				flag = advisor_events_adm
				days = 720
			}
		}
		clr_country_flag = advisor_events_adm
	}
	if = {
		limit = {
			had_country_flag = {
				flag = advisor_events_dip
				days = 720
			}
		}
		clr_country_flag = advisor_events_dip
	}
	if = {
		limit = {
			had_country_flag = {
				flag = advisor_events_mil
				days = 720
			}
		}
		clr_country_flag = advisor_events_mil
	}
	#Clearing of Jewish events flags
	if = {
		limit = {
			had_country_flag = {
				flag = shalosh_regalim
				days = 365
			}
		}
		clr_country_flag = shalosh_regalim
	}
}

# El Dorado
on_explore_coast = {
	random_events = {
		10 = exploration_events.1
		10 = exploration_events.2
		10 = exploration_events.3
		10 = exploration_events.5
		10 = exploration_events.7
		10 = exploration_events.8
		10 = exploration_events.9
		10 = exploration_events.10
		10 = exploration_events.11
		10 = exploration_events.12
		10 = exploration_events.13
		10 = exploration_events.14
		10 = exploration_events.15
	}
}
on_conquistador_empty = {
	random_events = {
		10 = seven_cities_events.1
		10 = seven_cities_events.2
		10 = seven_cities_events.3
		10 = seven_cities_events.4
		10 = seven_cities_events.5
		10 = seven_cities_events.6
		10 = seven_cities_events.7
		10 = seven_cities_events.8

		10 = seven_cities_events.100
		10 = seven_cities_events.101
		10 = seven_cities_events.102
		10 = seven_cities_events.103
		10 = seven_cities_events.104
		10 = seven_cities_events.105

		50 = seven_cities_events.200
		50 = seven_cities_events.201
		50 = seven_cities_events.202
		50 = seven_cities_events.203
		50 = seven_cities_events.204
		50 = seven_cities_events.205
		50 = seven_cities_events.206
		50 = seven_cities_events.207
		50 = seven_cities_events.208
		50 = seven_cities_events.209
		50 = seven_cities_events.210
		50 = seven_cities_events.211
		50 = seven_cities_events.212
		50 = seven_cities_events.213
		50 = seven_cities_events.214
		50 = seven_cities_events.215
		50 = seven_cities_events.216
		50 = seven_cities_events.217
		50 = seven_cities_events.218
		50 = seven_cities_events.219
		50 = seven_cities_events.220
		50 = seven_cities_events.221
		50 = seven_cities_events.222
		50 = seven_cities_events.223

		10 = seven_cities_events.302
		10 = seven_cities_events.303
		10 = seven_cities_events.308
		10 = seven_cities_events.309

		10 = seven_cities_events.400
		10 = seven_cities_events.401
		10 = seven_cities_events.402
		10 = seven_cities_events.405
		10 = seven_cities_events.406
		10 = seven_cities_events.407
		10 = seven_cities_events.408
		10 = seven_cities_events.409
		10 = seven_cities_events.410
		10 = seven_cities_events.413
		10 = seven_cities_events.414

		2000 = 0
	}
}

on_conquistador_native = {
	random_events = {
		10 = seven_cities_events.300
		10 = seven_cities_events.301
		10 = seven_cities_events.303
		10 = seven_cities_events.304
		10 = seven_cities_events.305
		10 = seven_cities_events.306
		10 = seven_cities_events.307
		10 = seven_cities_events.308
		10 = seven_cities_events.309
		10 = seven_cities_events.310
		100 = ipe_plague.3

		200 = 0
	}
}

on_buy_religious_reform = {
	events = {
		religious_reforms.1
		religious_reforms.2
		religious_reforms.3

		ipe_religion.2
		ipe_religion.3
		ipe_religion.4
	}
}

on_circumnavigation = {
	events = {
		exploration_events.17
		exploration_events.16 #First Circumnavigation Europe
	}
}

on_become_free_city = {
	events = {
		free_cities.1
	}
}

on_remove_free_city = {
	events = {
		free_cities.2
	}
}

on_revoke_estate_land_ai = { #AI can't handle the rebels atm or perform a gradual revoke, sorry
	add_province_modifier = {
		name = revoked_estate_modifier
		duration = 5475 #15 years
	}
}

on_revoke_estate_land = {
	add_province_modifier = {
		name = revoked_estate_modifier
		duration = 5475 #15 years
	}
	if = {
		limit = {
			has_estate = estate_cossacks
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_cossacks
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = cossack_rebels
			size = 1
		}
		province_event = { id = cossack_estate_events.15 }
	}
	if = {
		limit = {
			has_estate = estate_dhimmi
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_dhimmi
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = religious_rebels
			size = 1
		}
		province_event = { id = dhimmi_estate_events.9 }
	}
	if = {
		limit = {
			has_estate = estate_church
			has_owner_religion = yes
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = religious_rebels
			size = 1
		}
		province_event = { id = church_estate_events.11 }
	}
	if = {
		limit = {
			has_estate = estate_church
			has_owner_religion = no
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = church_estate_events.11 }
	}
	if = {
		limit = {
			has_estate = estate_nobles
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = noble_rebels
			size = 1
		}
		province_event = { id = nobles_estate_events.12 }
	}
	if = {
		limit = {
			has_estate = estate_burghers
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_burghers
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = burghers_estate_events.16 }
	}
	if = {
		limit = {
			has_estate = estate_nomadic_tribes
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_nomadic_tribes
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = tribal_rebels
			size = 1
		}
		province_event = { id = tribal_estate_events.10 }
	}
	if = {
		limit = {
			has_estate = estate_brahmins
			owner = {
				NOT = {
					religion = hinduism
				}
				NOT = {
					estate_loyalty = {
						estate = estate_brahmins
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = religious_rebels
			size = 1
		}
		province_event = { id = brahmins_estate_events.1 }
	}
	if = {
		limit = {
			has_estate = estate_brahmins
			owner = {
				religion = hinduism
				NOT = {
					estate_loyalty = {
						estate = estate_brahmins
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = brahmins_estate_events.1 }
	}
	if = {
		limit = {
			has_estate = estate_vaisyas
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_vaisyas
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = vaisyas_estate_events.1 }
	}
	if = {
		limit = {
			has_estate = estate_rajput
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_rajput
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = noble_rebels
			size = 1
		}
		province_event = { id = rajputs_estate_events.1 }
	}
	if = {
		limit = {
			has_estate = estate_jains
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_jains
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = jains_estate_events.1 }
	}
	if = {
		limit = {
			has_estate = estate_maratha
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_maratha
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = noble_rebels
			size = 1
		}
		province_event = { id = marathas_estate_events.1 }
	}
}

on_revoke_estate_land_ai_post = {
	add_local_autonomy = 25
}
on_revoke_estate_land_post = {
	add_local_autonomy = 25
}

on_grant_estate_land = {
	if = {
		limit = {
			has_province_modifier = revoked_estate_modifier
		}
		remove_province_modifier = revoked_estate_modifier
	}
}

on_death_has_harem = {
	if = {
		limit = {
			has_heir = no
		}
		country_event = { id = harem_events.2 }
	}
}

on_select_heir_from_harem = {
}

on_fetishist_cult_change = {
	country_event = { id = fetishist_flavor.302 days = 10 } #removing tomb if incompatible cult is picked
	country_event = { id = fetishist_flavor.304 days = 10 } #rebuilding tomb if lost
	if = {
		limit = {
			has_country_flag = lost_ancestral_lands
			NOT = { has_adopted_cult = zanahary_cult }
			NOT = { has_adopted_cult = central_african_ancestor_cult }
		}
		clr_country_flag = lost_ancestral_lands
	}
}

# country
on_gain_great_power_status = {
	if = {
		limit = {
			NOT = { has_country_flag = became_great_power_flag }
		}
		set_country_flag = became_great_power_flag
	}
}

# country
on_lose_great_power_status = {
}

# province
on_province_religion_converted = {
	on_province_religion_converted_estate_privileges_effect = yes
	if = {
		limit = {
			owner = {
				has_country_modifier = son_fetishism_as_secondary_religion
			}
			religion = shamanism
			NOT = { has_province_modifier = son_fetishism_as_secondary_religion_province }
		}
		add_province_modifier = {
			name = son_fetishism_as_secondary_religion_province
			duration = -1
			desc = son_fetishism_as_secondary_religion_province_desc
		}
	}
	else_if = {
		limit = {
			OR = {
				owner = {
					NOT = { has_country_modifier = son_fetishism_as_secondary_religion }
				}
				NOT = { religion = shamanism }
			}
			has_province_modifier = son_fetishism_as_secondary_religion_province
		}
		remove_province_modifier = son_fetishism_as_secondary_religion_province
	}
	judaism_on_province_change_religion_or_change_owner_effect = yes
}

# province
on_province_culture_converted = {
	judaism_on_province_culture_converted_effect = yes
	if = {
		limit = {
			NOT = {
				culture_group = purepecha_group
				culture_group = central_american
				culture_group = hokan
				culture_group = cuitlatec_group
				culture_group = maya
				culture_group = andean_group
				culture_group = puquina_group
				culture_group = totozoquean
				culture_group = otomanguean
				culture_group = chimuan_group
				culture_group = tucanoan
				culture_group = chocoan
				culture_group = waroid
				culture_group = je_tupi
				culture_group = je
				culture_group = charruan_group
				culture_group = maranon
				culture_group = chibchan
				culture_group = barbacoan
				culture_group = mataco
				culture_group = araucanian
				culture_group = kunza_group
				culture_group = diaguita_group
				culture_group = huarpean
				culture_group = carribean
				culture_group = arawakan
				culture_group = eskaleut
				culture_group = algonquian
				culture_group = iroquoian
				culture_group = caddoan
				culture_group = timucuan_group
				culture_group = muskogean
				culture_group = chitimacha_group
				culture_group = atakapa_group
				culture_group = natchez_group
				culture_group = tanoan
				culture_group = keres_group
				culture_group = zuni_group
				culture_group = chumash_group
				culture_group = yuchi_group
				culture_group = na_dene
				culture_group = salish_group
				culture_group = penutian
				culture_group = kutenai_group
				culture_group = wakashan
				culture_group = pacific
				culture_group = oceanic
			}
		}
		remove_province_modifier = old_world_diseases_normal
		remove_province_modifier = old_world_diseases_bad
	}
}

# THIS = Province, FROM = Country who Propogated
on_convert_by_trade_policy = {
	if = {
		limit = {
			trade_company_region = trade_company_moluccas
			FROM = { is_defender_of_faith = yes }
		}
		FROM = {
			if = {
				limit = {
					ai = no
					NOT = { check_variable = { which = religion_propagated_in_moluccas value = 1 } }
				}
				set_variable = {
					which = religion_propagated_in_moluccas value = 1
				}
			}
			else_if = {
				limit = {
					ai = no
					check_variable = { which = religion_propagated_in_moluccas value = 1 }
					NOT = { check_variable = { which = religion_propagated_in_moluccas value = 6 } }
				}
				change_variable = {
					which = religion_propagated_in_moluccas value = 1
				}
			}
		}
	}
}

# province
# FROM = old owner
on_province_owner_change = {
	events = {
		japan.1
	}

	if = {
		limit = {
			region = mashriq_region
			has_province_modifier = estate_mamluks_entrenched_syrian_governors_mod
			owner = {
				NOT = {
					has_estate_privilege = estate_mamluks_entrenched_syrian_governors
				}
			}
		}
		remove_province_modifier = estate_mamluks_entrenched_syrian_governors_mod
	}

	if = {
		limit = {
			region = mashriq_region
			NOT = {
				has_province_modifier = estate_mamluks_entrenched_syrian_governors_mod
			}
			owner = {
				has_estate_privilege = estate_mamluks_entrenched_syrian_governors
			}
		}
		add_province_modifier = {
			name = estate_mamluks_entrenched_syrian_governors_mod
			duration = -1
		}
	}

	if = {
		limit = {
			region = egypt_region
			has_province_modifier = estate_mamluks_mamluk_rule_in_egypt_mod
			owner = {
				NOT = {
					has_estate_privilege = estate_mamluks_mamluk_rule_in_egypt
				}
			}
		}
		remove_province_modifier = estate_mamluks_mamluk_rule_in_egypt_mod
	}

	if = {
		limit = {
			region = egypt_region
			NOT = {
				has_province_modifier = estate_mamluks_mamluk_rule_in_egypt_mod
			}
			owner = {
				has_estate_privilege = estate_mamluks_mamluk_rule_in_egypt
			}
		}
		add_province_modifier = {
			name = estate_mamluks_mamluk_rule_in_egypt_mod
			duration = -1
		}
	}
	
	if = {
		limit = {
			OR = {
				has_province_modifier = wine_bonus_prod
				has_province_modifier = grain_bonus_prod
			}
			FROM = { has_reform = monastic_breweries_reform }
			NOT = { owner = { has_reform = monastic_breweries_reform } }
		}
		remove_province_modifier = wine_bonus_prod
		remove_province_modifier = grain_bonus_prod
	}
	
	if = {
		limit = {
			NOT = {
				OR = {
					has_province_modifier = wine_bonus_prod
					has_province_modifier = grain_bonus_prod
				}
			}
			owner = { has_reform = monastic_breweries_reform }
			NOT = { FROM = { has_reform = monastic_breweries_reform } }
		}
		hidden_effect = {
			if = {
				limit = {
					trade_goods = wine
				}
				add_province_modifier = { 
					name = wine_bonus_prod
					duration = -1
					hidden = yes
				}
			}
			if = {
				limit = {
					trade_goods = grain
				}
				add_province_modifier = { 
					name = grain_bonus_prod
					duration = -1
					hidden = yes
				}
			}
		}
	}

	if = {
		limit = {
			trade_goods = wool
			region = iberia_region
			NOT = {
				has_province_modifier = merino_wool
			}
			owner = {
				has_estate_privilege = estate_nobles_mesta_privileges
			}
		}
		add_province_modifier = {
			name = merino_wool
			duration = -1
		}
	}

	if = {
		limit = {
			trade_goods = wool
			region = iberia_region
			has_province_modifier = merino_wool
			owner = {
				NOT = {
					has_estate_privilege = estate_nobles_mesta_privileges
				}
			}
		}
		remove_province_modifier = merino_wool
	}

	if = {
		limit = {
			trade_goods = wool
			region = british_isles_region
			NOT = {
				has_province_modifier = estate_burghers_english_wool_trade_mod
			}
			owner = {
				has_estate_privilege = estate_burghers_english_wool_trade
			}
		}
		add_province_modifier = {
			name = estate_burghers_english_wool_trade_mod
			duration = -1
		}
	}

	if = {
		limit = {
			trade_goods = wool
			region = british_isles_region
			has_province_modifier = estate_burghers_english_wool_trade_mod
			owner = {
				NOT = {
					has_estate_privilege = estate_burghers_english_wool_trade
				}
			}
		}
		remove_province_modifier = estate_burghers_english_wool_trade_mod
	}

	if = {
		limit = {
			superregion = india_superregion
			culture = tamil
			NOT = {
				has_province_modifier = estate_vaisyas_tamil_trade_guilds_mod
			}
			owner = {
				has_estate_privilege = estate_vaisyas_tamil_trade_guilds
			}
		}
		add_province_modifier = {
			name = estate_vaisyas_tamil_trade_guilds_mod
			duration = -1
		}
	}

	if = {
		limit = {
			superregion = india_superregion
			culture = tamil
			has_province_modifier = estate_vaisyas_tamil_trade_guilds_mod
			owner = {
				NOT = {
					has_estate_privilege = estate_vaisyas_tamil_trade_guilds
				}
			}
		}
		remove_province_modifier = estate_vaisyas_tamil_trade_guilds_mod
	}

	if = {
		limit = {
			religion = hinduism
			NOT = {
				has_province_modifier = estate_rajput_levies_for_muslims_mod
			}
			owner = {
				has_estate_privilege = estate_rajput_levies_for_muslims
			}
		}
		add_province_modifier = {
			name = estate_rajput_levies_for_muslims_mod
			duration = -1
		}
	}

	if = {
		limit = {
			religion = hinduism
			has_province_modifier = estate_rajput_levies_for_muslims_mod
			owner = {
				NOT = {
					has_estate_privilege = estate_rajput_levies_for_muslims
				}
			}
		}
		remove_province_modifier = estate_rajput_levies_for_muslims_mod
	}

	if = {
		limit = {
			owned_by = SRU
			exists = ARA
		}
		ARA = {
			set_country_flag = ARA_defeat_saruhan
		}
	}
	if = {
		limit = {
			NOT = { owner = { religion_group = muslim } }
			has_province_modifier = sufi_shrine
		}
		remove_province_modifier = sufi_shrine
	}
	on_province_owner_change_estate_privileges_effect = yes
	judaism_on_province_change_religion_or_change_owner_effect = yes

	if = {
		limit = {
			region = indo_china_region
			has_building = farm_estate
			trade_goods = grain
			owner = {
				has_mission = mnd_khm_irrigation 
				NOT = {
					OR = {
						has_estate = estate_vaisyas
						has_estate = estate_burghers
					}
				}
			}
		}
		add_province_modifier = {
			name = grain_production_improved
			duration = 7300
		}
	}

	if = {
		limit = {
			owner = {
				has_country_modifier = son_fetishism_as_secondary_religion
			}
			religion = shamanism
			NOT = { has_province_modifier = son_fetishism_as_secondary_religion_province }
		}
		add_province_modifier = {
			name = son_fetishism_as_secondary_religion_province
			duration = -1
			desc = son_fetishism_as_secondary_religion_province_desc
		}
	}
	
	if = {
		limit = {
			province_id = 379
			owner = {
				NOT = { religion = jewish }
			}
		}
		remove_country_modifier = third_temple_country_modifier
	}
	else_if = {
		limit = {
			OR = {
				owner = {
					NOT = { has_country_modifier = son_fetishism_as_secondary_religion }
				}
				NOT = { religion = shamanism }
			}
			has_province_modifier = son_fetishism_as_secondary_religion_province
		}
		remove_province_modifier = son_fetishism_as_secondary_religion_province
	}

	if = {
        limit = {
            has_great_project = {
                type = hagia_sophia
            }
            has_province_flag = hagia_sophia_constructed
        }
        set_great_project_tier_1 = {
            type = hagia_sophia
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = stonehenge
            }
            has_province_flag = stonehenge_constructed
        }
        set_great_project_tier_1 = {
            type = stonehenge
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = tower_of_london
            }
            has_province_flag = tower_of_london_constructed
        }
        set_great_project_tier_1 = {
            type = tower_of_london
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = buddha_statues
            }
            has_province_flag = buddha_statues_constructed
        }
        set_great_project_tier_1 = {
            type = buddha_statues
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = parthenon
            }
            has_province_flag = parthenon_constructed
        }
        set_great_project_tier_1 = {
            type = parthenon
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = forbidden_city
            }
            has_province_flag = forbidden_city_constructed
        }
        set_great_project_tier_1 = {
            type = forbidden_city
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = angkor_wat
            }
            has_province_flag = angkor_wat_constructed
        }
        set_great_project_tier_1 = {
            type = angkor_wat
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = cologne_cathedral
            }
            has_province_flag = cologne_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = cologne_cathedral
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = kremlin
            }
            has_province_flag = kremlin_constructed
        }
        set_great_project_tier_1 = {
            type = kremlin
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = machu_picchu
            }
            has_province_flag = machu_picchu_constructed
        }
        set_great_project_tier_1 = {
            type = machu_picchu
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = chichen_itza
            }
            has_province_flag = chichen_itza_constructed
        }
        set_great_project_tier_1 = {
            type = chichen_itza
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = himeji_castle
            }
            has_province_flag = himeji_castle_constructed
        }
        set_great_project_tier_1 = {
            type = himeji_castle
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = moai
            }
            has_province_flag = moai_constructed
        }
        set_great_project_tier_1 = {
            type = moai
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = stpeters_cathedral
            }
            has_province_flag = stpeters_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = stpeters_cathedral
        }
    }
	if = {
        limit = {
            has_great_project = {
                type = tenochtitlan
            }
            has_province_flag = tenochtitlan_constructed
        }
        set_great_project_tier_1 = {
            type = tenochtitlan
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = notre_dame_cathedral
            }
            has_province_flag = notre_dame_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = notre_dame_cathedral
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = shwedagon_pagoda
            }
            has_province_flag = shwedagon_pagoda_constructed
        }
        set_great_project_tier_1 = {
            type = shwedagon_pagoda
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china
            }
            has_province_flag = the_great_wall_of_china_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china_lanzhou
            }
            has_province_flag = the_great_wall_of_china_lanzhou_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china_lanzhou
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china_zhangye
            }
            has_province_flag = the_great_wall_of_china_zhangye_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china_zhangye
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china_yulin
            }
            has_province_flag = the_great_wall_of_china_yulin_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china_yulin
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china_xuanhua
            }
            has_province_flag = the_great_wall_of_china_xuanhua_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china_xuanhua
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china_datong
            }
            has_province_flag = the_great_wall_of_china_datong_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china_datong
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_great_wall_of_china_shanhai
            }
            has_province_flag = the_great_wall_of_china_shanhai_constructed
        }
        set_great_project_tier_1 = {
            type = the_great_wall_of_china_shanhai
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = taj_mahal
            }
            has_province_flag = taj_mahal_constructed
        }
        set_great_project_tier_1 = {
            type = taj_mahal
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = alhambra
            }
            has_province_flag = alhambra_constructed
        }
        set_great_project_tier_1 = {
            type = alhambra
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = the_grand_palace
            }
            has_province_flag = the_grand_palace_constructed
        }
        set_great_project_tier_1 = {
            type = the_grand_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = bagan_temples
            }
            has_province_flag = bagan_temples_constructed
        }
        set_great_project_tier_1 = {
            type = bagan_temples
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = ait_benhaddou
            }
            has_province_flag = ait_benhaddou_constructed
        }
        set_great_project_tier_1 = {
            type = ait_benhaddou
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = registan_square
            }
            has_province_flag = registan_square_constructed
        }
        set_great_project_tier_1 = {
            type = registan_square
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = golden_temple
            }
            has_province_flag = golden_temple_constructed
        }
        set_great_project_tier_1 = {
            type = golden_temple
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = jokhang_temple
            }
            has_province_flag = jokhang_temple_constructed
        }
        set_great_project_tier_1 = {
            type = jokhang_temple
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = borobudur_temple
            }
            has_province_flag = borobudur_temple_constructed
        }
        set_great_project_tier_1 = {
            type = borobudur_temple
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = temple_of_confucius
            }
            has_province_flag = temple_of_confucius_constructed
        }
        set_great_project_tier_1 = {
            type = temple_of_confucius
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = kanbawzathadi_palace
            }
            has_province_flag = kanbawzathadi_palace_constructed
        }
        set_great_project_tier_1 = {
            type = kanbawzathadi_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = pura_besakih
            }
            has_province_flag = pura_besakih_constructed
        }
        set_great_project_tier_1 = {
            type = pura_besakih
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = pyramid_of_cheops
            }
            has_province_flag = pyramid_of_cheops_constructed
        }
        set_great_project_tier_1 = {
            type = pyramid_of_cheops
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = khami_ruins
            }
            has_province_flag = khami_ruins_constructed
        }
        set_great_project_tier_1 = {
            type = khami_ruins
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = prambanan_temple
            }
            has_province_flag = prambanan_temple_constructed
        }
        set_great_project_tier_1 = {
            type = prambanan_temple
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = kiev_pechersk_lavra
            }
            has_province_flag = kiev_pechersk_lavra_constructed
        }
        set_great_project_tier_1 = {
            type = kiev_pechersk_lavra
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = belem_tower
            }
            has_province_flag = belem_tower_constructed
        }
        set_great_project_tier_1 = {
            type = belem_tower
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = versailles
            }
            has_province_flag = versailles_constructed
        }
        set_great_project_tier_1 = {
            type = versailles
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = el_escorial
            }
            has_province_flag = el_escorial_constructed
        }
        set_great_project_tier_1 = {
            type = el_escorial
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = potosi
            }
            has_province_flag = potosi_constructed
        }
        set_great_project_tier_1 = {
            type = potosi
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = kaaba
            }
            has_province_flag = kaaba_constructed
        }
        set_great_project_tier_1 = {
            type = kaaba
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = holy_city_jerusalem
            }
            has_province_flag = holy_city_jerusalem_constructed
        }
        set_great_project_tier_1 = {
            type = holy_city_jerusalem
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = great_mosque_djenne
            }
            has_province_flag = great_mosque_djenne_constructed
        }
        set_great_project_tier_1 = {
            type = great_mosque_djenne
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = imperial_city_hue
            }
            has_province_flag = imperial_city_hue_constructed
        }
        set_great_project_tier_1 = {
            type = imperial_city_hue
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = bam_citadel
            }
            has_province_flag = bam_citadel_constructed
        }
        set_great_project_tier_1 = {
            type = bam_citadel
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = bara_katra
            }
            has_province_flag = bara_katra_constructed
        }
        set_great_project_tier_1 = {
            type = bara_katra
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = brandenburg_gate
            }
            has_province_flag = brandenburg_gate_constructed
        }
        set_great_project_tier_1 = {
            type = brandenburg_gate
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = buda_castle
            }
            has_province_flag = buda_castle_constructed
        }
        set_great_project_tier_1 = {
            type = buda_castle
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = chan_chan_citadel
            }
            has_province_flag = chan_chan_citadel_constructed
        }
        set_great_project_tier_1 = {
            type = chan_chan_citadel
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = doges_palace
            }
            has_province_flag = doges_palace_constructed
        }
        set_great_project_tier_1 = {
            type = doges_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = duomo_milano
            }
            has_province_flag = duomo_milano_constructed
        }
        set_great_project_tier_1 = {
            type = duomo_milano
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = ellora_caves
            }
            has_province_flag = ellora_caves_constructed
        }
        set_great_project_tier_1 = {
            type = ellora_caves
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = erdene_zuu
            }
            has_province_flag = erdene_zuu_constructed
        }
        set_great_project_tier_1 = {
            type = erdene_zuu
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = etchimiadzin_cathedral
            }
            has_province_flag = etchimiadzin_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = etchimiadzin_cathedral
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = gomateshwara_statue
            }
            has_province_flag = gomateshwara_statue_constructed
        }
        set_great_project_tier_1 = {
            type = gomateshwara_statue
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = chola_temples
            }
            has_province_flag = chola_temples_constructed
        }
        set_great_project_tier_1 = {
            type = chola_temples
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = gyeongbok_palace
            }
            has_province_flag = gyeongbok_palace_constructed
        }
        set_great_project_tier_1 = {
            type = gyeongbok_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = hampi
            }
            has_province_flag = hampi_constructed
        }
        set_great_project_tier_1 = {
            type = hampi
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = prague
            }
            has_province_flag = prague_constructed
        }
        set_great_project_tier_1 = {
            type = prague
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = holy_city_kairouan
            }
            has_province_flag = holy_city_kairouan_constructed
        }
        set_great_project_tier_1 = {
            type = holy_city_kairouan
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = imam_hussein_al-abbas
            }
            has_province_flag = imam_hussein_al_abbas_constructed
        }
        set_great_project_tier_1 = {
            type = imam_hussein_al-abbas
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = kashi_vishwanath
            }
            has_province_flag = kashi_vishwanath_constructed
        }
        set_great_project_tier_1 = {
            type = kashi_vishwanath
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = khajuraho
            }
            has_province_flag = khajuraho_constructed
        }
        set_great_project_tier_1 = {
            type = khajuraho
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = kilwa_city
            }
            has_province_flag = kilwa_city_constructed
        }
        set_great_project_tier_1 = {
            type = kilwa_city
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = krakow_cloth_hall
            }
            has_province_flag = krakow_cloth_hall_constructed
        }
        set_great_project_tier_1 = {
            type = krakow_cloth_hall
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = maidan-e_naqsh-e_jahan
            }
            has_province_flag = maidan_e_naqsh_e_jahan_constructed
        }
        set_great_project_tier_1 = {
            type = maidan-e_naqsh-e_jahan
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = malbork_castle
            }
            has_province_flag = malbork_castle_constructed
        }
        set_great_project_tier_1 = {
            type = malbork_castle
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = malta_forts
            }
            has_province_flag = malta_forts_constructed
        }
        set_great_project_tier_1 = {
            type = malta_forts
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = mehrangarh_fort
            }
            has_province_flag = mehrangarh_fort_constructed
        }
        set_great_project_tier_1 = {
            type = mehrangarh_fort
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = nan_madoll
            }
            has_province_flag = nan_madoll_constructed
        }
        set_great_project_tier_1 = {
            type = nan_madoll
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = porcelain_tower_nanjing
            }
            has_province_flag = porcelain_tower_nanjing_constructed
        }
        set_great_project_tier_1 = {
            type = porcelain_tower_nanjing
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = rila_monasteries
            }
            has_province_flag = rila_monasteries_constructed
        }
        set_great_project_tier_1 = {
            type = rila_monasteries
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = churches_lalibela
            }
            has_province_flag = churches_lalibela_constructed
        }
        set_great_project_tier_1 = {
            type = churches_lalibela
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = royal_palace_caserta
            }
            has_province_flag = royal_palace_caserta_constructed
        }
        set_great_project_tier_1 = {
            type = royal_palace_caserta
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = sankore_madrasah
            }
            has_province_flag = sankore_madrasah_constructed
        }
        set_great_project_tier_1 = {
            type = sankore_madrasah
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = santa_maria_del_fiore
            }
            has_province_flag = santa_maria_del_fiore_constructed
        }
        set_great_project_tier_1 = {
            type = santa_maria_del_fiore
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = spiral_minaret_samarra
            }
            has_province_flag = spiral_minaret_samarra_constructed
        }
        set_great_project_tier_1 = {
            type = spiral_minaret_samarra
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = sultan_ahmed_mosque
            }
            has_province_flag = sultan_ahmed_mosque_constructed
        }
        set_great_project_tier_1 = {
            type = sultan_ahmed_mosque
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = sun_temple_konarak
            }
            has_province_flag = sun_temple_konarak_constructed
        }
        set_great_project_tier_1 = {
            type = sun_temple_konarak
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = swayambhunath
            }
            has_province_flag = swayambhunath_constructed
        }
        set_great_project_tier_1 = {
            type = swayambhunath
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = white_house
            }
            has_province_flag = white_house_constructed
        }
        set_great_project_tier_1 = {
            type = white_house
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = ulm_minster_great_project
            }
            has_province_flag = ulm_minster_great_project_constructed
        }
        set_great_project_tier_1 = {
            type = ulm_minster_great_project
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = walls_benin
            }
            has_province_flag = walls_benin_constructed
        }
        set_great_project_tier_1 = {
            type = walls_benin
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = winter_palace
            }
            has_province_flag = winter_palace_constructed
        }
        set_great_project_tier_1 = {
            type = winter_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = theodosian_walls
            }
            has_province_flag = theodosian_walls_constructed
        }
        set_great_project_tier_1 = {
            type = theodosian_walls
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = topkapi_palace
            }
            has_province_flag = topkapi_palace_constructed
        }
        set_great_project_tier_1 = {
            type = topkapi_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = louvre
            }
            has_province_flag = louvre_constructed
        }
        set_great_project_tier_1 = {
            type = louvre
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = le_mont_saint_michel
            }
            has_province_flag = le_mont_saint_michel_constructed
        }
        set_great_project_tier_1 = {
            type = le_mont_saint_michel
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = palais_des_papes
            }
            has_province_flag = palais_des_papes_constructed
        }
        set_great_project_tier_1 = {
            type = palais_des_papes
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = reims_cathedral
            }
            has_province_flag = reims_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = reims_cathedral
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = chateau_de_chambord
            }
            has_province_flag = chateau_de_chambord_constructed
        }
        set_great_project_tier_1 = {
            type = chateau_de_chambord
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = mosque_cathedral_of_cordoba
            }
            has_province_flag = mosque_cathedral_of_cordoba_constructed
        }
        set_great_project_tier_1 = {
            type = mosque_cathedral_of_cordoba
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = santiago_de_compostela_cathedral
            }
            has_province_flag = santiago_de_compostela_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = santiago_de_compostela_cathedral
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = alcazar_of_segovia
            }
            has_province_flag = alcazar_of_segovia_constructed
        }
        set_great_project_tier_1 = {
            type = alcazar_of_segovia
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = alcazar_of_seville
            }
            has_province_flag = alcazar_of_seville_constructed
        }
        set_great_project_tier_1 = {
            type = alcazar_of_seville
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = fortifications_of_gibraltar
            }
            has_province_flag = fortifications_of_gibraltar_constructed
        }
        set_great_project_tier_1 = {
            type = fortifications_of_gibraltar
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = leaning_tower_of_pisa
            }
            has_province_flag = leaning_tower_of_pisa_constructed
        }
        set_great_project_tier_1 = {
            type = leaning_tower_of_pisa
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = arch_of_constantine
            }
            has_province_flag = arch_of_constantine_constructed
        }
        set_great_project_tier_1 = {
            type = arch_of_constantine
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = colosseum
            }
            has_province_flag = colosseum_constructed
        }
        set_great_project_tier_1 = {
            type = colosseum
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = castel_santangelo
            }
            has_province_flag = castel_santangelo_constructed
        }
        set_great_project_tier_1 = {
            type = castel_santangelo
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = venetian_arsenal
            }
            has_province_flag = venetian_arsenal_constructed
        }
        set_great_project_tier_1 = {
            type = venetian_arsenal
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = st_marks_basilica
            }
            has_province_flag = st_marks_basilica_constructed
        }
        set_great_project_tier_1 = {
            type = st_marks_basilica
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = genovese_arsenal
            }
            has_province_flag = genovese_arsenal_constructed
        }
        set_great_project_tier_1 = {
            type = genovese_arsenal
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = osaka_castle
            }
            has_province_flag = osaka_castle_constructed
        }
        set_great_project_tier_1 = {
            type = osaka_castle
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = kotoku_in
            }
            has_province_flag = kotoku_in_constructed
        }
        set_great_project_tier_1 = {
            type = kotoku_in
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = hwaesong_fortress
            }
            has_province_flag = hwaesong_fortress_constructed
        }
        set_great_project_tier_1 = {
            type = hwaesong_fortress
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = citadel_of_aleppo
            }
            has_province_flag = citadel_of_aleppo_constructed
        }
        set_great_project_tier_1 = {
            type = citadel_of_aleppo
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = peterhof_palace
            }
            has_province_flag = peterhof_palace_constructed
        }
        set_great_project_tier_1 = {
            type = peterhof_palace
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = admiralty_office
            }
            has_province_flag = admiralty_office_constructed
        }
        set_great_project_tier_1 = {
            type = admiralty_office
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = canterbury_cathedral
            }
            has_province_flag = canterbury_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = canterbury_cathedral
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = durham_cathedral
            }
            has_province_flag = durham_cathedral_constructed
        }
        set_great_project_tier_1 = {
            type = durham_cathedral
        }
    }
    if = {
        limit = {
            has_great_project = {
                type = schonbrunn_palace
            }
            has_province_flag = schonbrunn_palace_constructed
        }
        set_great_project_tier_1 = {
            type = schonbrunn_palace
        }
    }
}

# country
on_parliament_debate_failed = {
}

# country
on_parliament_debate_succeeded = {
}

# country
on_harmonized_pagan = {
	events = {
		confucian_events.1
	}
}
on_harmonized_christian = {
	events = {
		confucian_events.2
	}
}
on_harmonized_muslim = {
	events = {
		confucian_events.3
	}
}
on_harmonized_jewish_group = {
	events = {
		confucian_events.5
	}
}
on_harmonized_zoroastrian_group = {
	events = {
		confucian_events.6
	}
}
on_harmonized_dharmic = {
	events = {
		confucian_events.4
	}
}
on_harmonized_mahayana = {
	events = {
		confucian_events.9
	}
}
on_harmonized_buddhism = { #Theravada
	events = {
		confucian_events.8
	}
}
on_harmonized_shinto = {
	events = {
		confucian_events.7
	}
}
on_harmonized_vajrayana = {
	events = {
		confucian_events.10
	}
}
on_harmonized_druze_group = {
	events = {
		ipe_religion.1
	}
}
on_harmonized_mesoamerican_religion_group = {
	events = {
		ipe_religion.5
	}
}
on_harmonized_taoism = {
	events = {
		ipe_religion.6
	}
}

# country
on_russian_sudebnik = {

}

# country
on_russian_oprichnina = {

}

# country
on_russian_streltsy = {

}

# province
on_consecrate_patriarch = {
}

# country. from = overlord
on_accept_tribute = {
}

# country. from = overlord
on_refuse_tribute = {
}

# country
on_leader_recruited = {
}

# country
on_general_recruited = {
	add_army_professionalism = 0.01
}

# country
on_admiral_recruited = {
}

# country
on_conquistador_recruited = {
}

# country
on_explorer_recruited = {
}

# THIS = Province, FROM = Country
on_regiment_recruited = {

}

# THIS = Province, FROM = Country, ROOT = Merc Unit
on_mercenary_recruited = {
	FROM = {
		add_army_professionalism = -0.01 # from -0.05, to make hiring mercenaries less punishing on professionalism
	}
}

# THIS = One province in the state
on_add_pasha = {
}

# THIS = One province in the state
on_remove_pasha = {
	hidden_effect = {
		owner = {
			save_event_target_as = province_owner
		}
		remove_province_modifier = pasha_removed_modifier
	}

	area = {
		limit = { owned_by = event_target:province_owner }
		add_or_extend_province_modifier_effect = { MODIFIER = pasha_removed_modifier DURATION = 3650 }
	}
}

# THIS = Province
on_janissaries_raised = {
}

on_cawa_raised = {
}

on_revolutionary_guard_raised = {
}

on_reform_enacted = {
}

on_reform_changed = {
}

on_trade_company_investment = {
}

on_center_of_trade_upgrade = {

}

on_center_of_trade_downgrade = {

}

on_culture_promoted = {
	judaism_on_culture_country_effect = yes
}

on_culture_demoted = {
	judaism_on_culture_country_effect = yes
}

on_primary_culture_changed = {
	judaism_on_culture_country_effect = yes
}

# FROM = Previous Country, ROOT = Province
on_company_chartered = {
	if = {
		limit = {
			OR = {
				region = bengal_region
				region = hindusthan_region
				region = west_india_region
				region = deccan_region
				region = coromandel_region
			}
		}
		ROOT = {
			owner = {
				set_country_flag = the_coin_is_stronger_than_the_sword
			}
		}
	}
}

# ROOT = Overlord, FROM = Minor
on_dependency_gained = {
	if = {
		limit = {
			FROM = {
				is_subject_of_type = tributary_state
			}
		}
		FROM = {
			country_event = {
				id = ipe_subject.30
				days = 1
			}
		}
	}
	if = {
		limit = {
			FROM = {
				is_subject_of_type = guard
			}
		}
		FROM = {
			country_event = {
				id = ipe_subject.30
				days = 1
			}
		}
	}
	if = {
		limit = {
			FROM = {
				has_reform = dutch_republic
			}
		}
		ROOT = {
			country_event = {
				id = dutch_republic.31
			}# States General falls under a PU
		}
	}
	if = {
		limit = {
			FROM = {
				is_subject_of_type = vassal
				any_subject_country = {
					is_subject_of_type = vassal
				}
			}
		}
		FROM = {
			every_subject_country = {
				limit = {
					is_subject_of_type = vassal
				}
				ROOT = {
					vassalize = PREV
				}
			}
		}
	}
	if = {
		limit = {
			FROM = {
				is_subject_of_type = vassal
				any_subject_country = {
					is_subject_of_type = march
				}
			}
		}
		FROM = {
			every_subject_country = {
				limit = {
					is_subject_of_type = march
				}
				ROOT = {
					create_march = PREV
				}
			}
		}
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = schmalkaldic_league_leader
			}
			FROM = {
				is_subject_of_type = league_associate
				has_country_flag = schmalkaldic_league_member
			}
		}
		FROM = {
			grant_independence = yes
		}
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = lezhe_league_leader
			}
			FROM = {
				is_subject_of_type = league_associate
				has_country_flag = lezhe_league_member
			}
		}
		FROM = {
			grant_independence = yes
		}
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = decapolis_leader
			}
			FROM = {
				is_subject_of_type = league_associate
				has_country_flag = decapolis_member
			}
		}
		FROM = {
			grant_independence = yes
		}
	}
	if = {
		limit = {
			FROM = {
				is_lesser_in_union = yes
				has_country_flag = death_of_albertines
				OR = {
					has_ruler_flag = ladislaus_postumus
					has_heir_flag = ladislaus_postumus
				}
			}
			STY = {
				dynasty = "von Habsburg"
			}
		}
		STY = {
			country_event = {
				id = ipeHAB.6
			}
		}
	}
	if = {
		limit = {
			FROM = {
				is_lesser_in_union = yes
				has_country_flag = death_of_albertines
				OR = {
					has_ruler_flag = ladislaus_postumus
					has_heir_flag = ladislaus_postumus
				}
				NOT = {
					has_country_flag = ladislaus_already_killed
				}
			}
		}
		FROM = {
			set_country_flag = ladislaus_already_killed
			country_event = {
				id = ipeHAB.1
			}
		}
	}
	if = {
		limit = {
			FROM = {
				is_lesser_in_union = yes
				tag = ANJ
				has_country_flag = angevin_inheritance
			}
			FRA = {
				dynasty = "de Valois"
			}
		}
		ANJ = {
			clr_country_flag = angevin_inheritance
		}
		FRA = {
			country_event = {
				id = ipePRO.1
			}
		}
	}
	if = {
		limit = {
			FROM = {
				tag = CYP
				has_country_flag = venetian_inheritance
				is_lesser_in_union = yes
			}
			VEN = {
				exists = yes
				is_subject = no
			}
		}
		CYP = {
			clr_country_flag = venetian_inheritance
			country_event = {
				id = ipeVEN.2
			}
		}
	}
	if = {
		limit = {
			FROM = {
				tag = GRZ
				is_lesser_in_union = yes
				is_subject_of = STY
			}
		}
		STY = {
			country_event = {
				id = ipeHAB.67
			}
		}
	}
	if = {
		limit = {
			FROM = {
				tag = GRZ
				is_lesser_in_union = yes
				is_subject_of = HAB
			}
		}
		GRZ = {
			clr_country_flag = gorizian_inheritance
		}
		HAB = {
			country_event = {
				id = ipeHAB.67
			}
		}
	}
	if = {
		limit = {
			FROM = {
				tag = FIU
				is_lesser_in_union = yes
				is_subject_of = STY
			}
		}
		STY = {
			country_event = {
				id = ipeHAB.84
			}
		}
	}
	if = {
		limit = {
			FROM = {
				tag = FIU
				is_lesser_in_union = yes
				is_subject_of = HAB
			}
		}
		FIU = {
			clr_country_flag = rijekan_inheritance
		}
		HAB = {
			country_event = {
				id = ipeHAB.84
			}
		}
	}
}

# ROOT = Overlord, FROM = Minor
on_dependency_lost = {
	FROM = {
		if = {
			limit = {
				has_country_flag = this_fief_will_die
			}
			clr_country_flag = this_fief_will_die
		}
		if = {
			limit = {
				has_ruler_flag = inheritable_fief
			}
			clr_ruler_flag = inheritable_fief
		}
		if = {
			limit = {
				has_country_flag = brandenburg_administrators
			}
			clr_country_flag = brandenburg_administrators
		}
	}
}

# ROOT = New vassal, FROM = Overlord
on_create_vassal = {
	add_legitimacy = 100
	add_republican_tradition = 100
	add_devotion = 100
	add_horde_unity = 100
	add_meritocracy = 100
	if = {
		limit = {
			religion = taoism
			any_known_country = {
				is_emperor_of_china = yes
				religion = confucianism
			}
		}
		change_religion = confucianism
		add_harmonized_religion = taoism
	}
	if = {
		limit = {
			FROM = {
				is_emperor_of_china = yes
			}
			capital_scope = {
				OR = {
					region = north_china_region
					region = south_china_region
					region = xinan_region
				}
			}
			culture_group = east_asian
		}
		FROM = {
			country_event = {
				id = ipe_ChineseEmpire.5
			}
		}
		add_government_reform = warring_state
	}
	if = {
		limit = {
			FROM = {
				has_reform = shogunate
			}
		}
		add_government_reform = daimyo
	}
	if = {
		limit = {
			FROM = {
				corruption = 100
			}
		}
		add_corruption = 100
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 100
				}
				corruption = 90
			}
		}
		add_corruption = 90
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 90
				}
				corruption = 80
			}
		}
		add_corruption = 80
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 80
				}
				corruption = 70
			}
		}
		add_corruption = 70
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 70
				}
				corruption = 60
			}
		}
		add_corruption = 60
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 60
				}
				corruption = 50
			}
		}
		add_corruption = 50
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 50
				}
				corruption = 40
			}
		}
		add_corruption = 40
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 40
				}
				corruption = 30
			}
		}
		add_corruption = 30
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 30
				}
				corruption = 20
			}
		}
		add_corruption = 20
	}
	if = {
		limit = {
			FROM = {
				NOT = {
					corruption = 20
				}
				corruption = 10
			}
		}
		add_corruption = 10
	}
	if = {
		limit = {
			has_dlc = "Emperor"
			FROM = {
				is_revolutionary = yes
			}
		}
		change_government = republic
		add_government_reform = junior_revolutionary_republic_reform
		set_country_flag = had_revolution
	}
	if = {
		limit = {
			tag = PAP
		}
		change_government = theocracy
		change_religion = catholic
		add_government_reform = papacy_reform
		adopt_reform_progress = FROM
	}
	if = {
		limit = {
			tag = AHM
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = BAH
			dynasty = "Bahman"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = BAH
			NOT = {
				dynasty = "Bahman"
			}
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = BID
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = BIJ
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Ilyas Shah"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Siddi"
		}
		set_ruler_culture = siddi
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Hussein Shah"
		}
		set_ruler_culture = hejazi_culture
	}
	if = {
		limit = {
			tag = BRR
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			dynasty = "Bahman"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = DEC
			was_tag = AHM
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BID
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BIJ
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BRR
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			was_tag = GOC
		}
		set_ruler_culture = azerbaijani
	}
	if = {
		limit = {
			tag = DEC
			NOT = {
				dynasty = "Bahman"
				was_tag = AHM
				was_tag = BID
				was_tag = BIJ
				was_tag = BRR
			}
		}
		set_ruler_culture = uzbehk
	}
	if = {
		limit = {
			tag = DLH
			NOT = {
				dynasty = "Sharqi"
			}
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = GOC
		}
		set_ruler_culture = azerbaijani
	}
	if = {
		limit = {
			tag = GUJ
			dynasty = "Ahmad Shah"
		}
		set_ruler_culture = panjabi
	}
	if = {
		limit = {
			OR = {
				tag = JNP
				was_tag = JNP
			}
			dynasty = "Sharqi"
		}
		set_ruler_culture = siddi
	}
	if = {
		limit = {
			tag = KHD
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = IRQ
			dynasty = "Qara Qoyunlu"
		}
		set_ruler_culture = azerbaijani
	}
	if = {
		limit = {
			tag = JAJ
		}
		set_ruler_culture = siddi
	}
	if = {
		limit = {
			tag = KLP
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = KRK
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = KRM
			dynasty = "Ghunashirin"
		}
		set_ruler_culture = kanauji
	}
	if = {
		limit = {
			tag = KSH
			dynasty = "Shah Miri"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			is_subject_of = LIT
			dynasty = "Gediminai"
		}
		set_ruler_culture = lithuanian
	}
	if = {
		limit = {
			tag = MLW
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			OR = {
				tag = MUG
				dynasty = "Gurkani"
			}
		}
		set_ruler_culture = uzbehk
	}
	if = {
		limit = {
			tag = MUL
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = ODH
		}
		set_ruler_culture = khorasani
	}
	if = {
		limit = {
			tag = RMP
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = SUR
			dynasty = "Suri"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = YZD
			dynasty = "Yazdi"
		}
		set_ruler_culture = al_misr_arabic
	}
	if = {
		limit = {
			tag = AKM
		}
		set_dynasty = "Akamatsu"
	}
	if = {
		limit = {
			tag = AMA
		}
		set_dynasty = "Amago"
	}
	if = {
		limit = {
			tag = ASA
		}
		set_dynasty = "Asakura"
	}
	if = {
		limit = {
			tag = ASK
		}
		set_dynasty = "Ashikaga"
	}
	if = {
		limit = {
			tag = CBA
		}
		set_dynasty = "Chiba"
	}
	if = {
		limit = {
			tag = CSK
		}
		set_dynasty = "Chosokabe"
	}
	if = {
		limit = {
			tag = DTE
		}
		set_dynasty = "Date"
	}
	if = {
		limit = {
			tag = HJO
		}
		set_dynasty = "Hojo"
	}
	if = {
		limit = {
			tag = HSK
		}
		set_dynasty = "Hosokawa"
	}
	if = {
		limit = {
			tag = IKE
		}
		set_dynasty = "Ikeda"
	}
	if = {
		limit = {
			tag = IMG
		}
		set_dynasty = "Imagawa"
	}
	if = {
		limit = {
			tag = ISK
		}
		set_dynasty = "Isshiki"
	}
	if = {
		limit = {
			tag = ITO
		}
		set_dynasty = "Ito"
	}
	if = {
		limit = {
			tag = KKC
		}
		set_dynasty = "Kikuchi"
	}
	if = {
		limit = {
			tag = KTB
		}
		set_dynasty = "Kitabatake"
	}
	if = {
		limit = {
			tag = KNO
		}
		set_dynasty = "Kono"
	}
	if = {
		limit = {
			tag = MAE
		}
		set_dynasty = "Maeda"
	}
	if = {
		limit = {
			tag = MRI
		}
		set_dynasty = "Mori"
	}
	if = {
		limit = {
			tag = RFR
		}
		set_dynasty = "Nanbu"
	}
	if = {
		limit = {
			tag = ODA
		}
		set_dynasty = "Oda"
	}
	if = {
		limit = {
			tag = OGS
		}
		set_dynasty = "Ogasawara"
	}
	if = {
		limit = {
			tag = OTM
		}
		set_dynasty = "Otomo"
	}
	if = {
		limit = {
			tag = OUC
		}
		set_dynasty = "Ouchi"
	}
	if = {
		limit = {
			tag = STK
		}
		set_dynasty = "Satake"
	}
	if = {
		limit = {
			tag = SBA
		}
		set_dynasty = "Shiba"
	}
	if = {
		limit = {
			tag = SMZ
		}
		set_dynasty = "Shimazu"
	}
	if = {
		limit = {
			tag = SHN
		}
		set_dynasty = "Shoni"
	}
	if = {
		limit = {
			tag = SOO
		}
		set_dynasty = "So"
	}
	if = {
		limit = {
			tag = TKD
		}
		set_dynasty = "Takeda"
	}
	if = {
		limit = {
			tag = TKI
		}
		set_dynasty = "Toki"
	}
	if = {
		limit = {
			tag = TKG
		}
		set_dynasty = "Tokugawa"
	}
	if = {
		limit = {
			tag = TTI
		}
		set_dynasty = "Tsutsui"
	}
	if = {
		limit = {
			tag = UES
		}
		set_dynasty = "Uesugi"
	}
	if = {
		limit = {
			tag = UTN
		}
		set_dynasty = "Utsunomiya"
	}
	if = {
		limit = {
			tag = YMN
		}
		set_dynasty = "Yamana"
	}
	if = {
		limit = {
			tag = TUR
		}
		set_dynasty = "Osmanoglu"
	}
	if = {
		limit = {
			tag = CND
		}
		set_dynasty = "Candaroglu"
	}
	if = {
		limit = {
			tag = DUL
		}
		set_dynasty = "Dulkadiroglu"
	}
	if = {
		limit = {
			tag = KAR
		}
		set_dynasty = "Karamanoglu"
	}
	if = {
		limit = {
			tag = RAM
		}
		set_dynasty = "Ramazanoglu"
	}
	if = {
		limit = {
			tag = TIM
		}
		set_dynasty = "Gurkani"
	}
	if = {
		limit = {
			tag = SUR
		}
		set_dynasty = "Suri"
	}
	if = {
		limit = {
			tag = ASN
		}
		set_dynasty = "Ashina"
	}
	if = {
		limit = {
			tag = HNM
		}
		set_dynasty = "Honma"
	}
	if = {
		limit = {
			tag = IWA
		}
		set_dynasty = "Iwaki"
	}
	if = {
		limit = {
			tag = KGK
		}
		set_dynasty = "Kyogoku"
	}
	if = {
		limit = {
			tag = KSI
		}
		set_dynasty = "Kasai"
	}
	if = {
		limit = {
			tag = MDR
		}
		set_dynasty = "Matsudaira"
	}
	if = {
		limit = {
			tag = MGM
		}
		set_dynasty = "Mogami"
	}
	if = {
		limit = {
			tag = RKK
		}
		set_dynasty = "Rokkaku"
	}
	if = {
		limit = {
			tag = SGR
		}
		set_dynasty = "Sagara"
	}
	if = {
		limit = {
			tag = SUW
		}
		set_dynasty = "Suwa"
	}
	if = {
		limit = {
			tag = TNA
		}
		set_dynasty = "Tanegashima"
	}
	if = {
		limit = {
			tag = TGI
		}
		set_dynasty = "Togashi"
	}
	if = {
		limit = {
			tag = BAH
		}
		set_dynasty = "Bahmani"
	}
	if = {
		limit = {
			tag = ANO
		}
		set_dynasty = "Asano"
	}
	if = {
		limit = {
			tag = AZI
		}
		set_dynasty = "Azai"
	}
	if = {
		limit = {
			tag = MSU
		}
		set_dynasty = "Matsumae"
	}
	if = {
		limit = {
			tag = MYI
		}
		set_dynasty = "Miyoshi"
	}
	if = {
		limit = {
			tag = STO
		}
		set_dynasty = "Saito"
	}
	if = {
		limit = {
			tag = NIK
		}
		set_dynasty = "Niki"
	}
	if = {
		limit = {
			tag = UKU
		}
		set_dynasty = "Uku"
	}
	if = {
		limit = {
			tag = ICJ
		}
		set_dynasty = "Ichijo"
	}
	if = {
		limit = {
			tag = KMS
		}
		set_dynasty = "Kimotsuki"
	}
	if = {
		limit = {
			tag = STM
		}
		set_dynasty = "Satomi"
	}
	if = {
		limit = {
			tag = JAP
			has_reform = chrysanthemum_throne
		}
		set_dynasty = "Yamato"
	}
	if = {
		limit = {
			tag = DKG
		}
		set_dynasty = "Dukagjini"
	}
	if = {
		limit = {
			tag = KST
		}
		set_dynasty = "Kastrioti"
	}
	if = {
		limit = {
			tag = ARI
		}
		set_dynasty = "Arianiti"
	}
	if = {
		limit = {
			tag = XBT
		}
		set_dynasty = "Muzaka"
	}
}

# ROOT = Country establishing it
# First province in state is set
on_holy_order_established = {

}

# When a minority is expelled to a colony
# THIS = Colony, ROOT = Colony, FROM = Home province
on_minority_expelled = {

}

# THIS = Raiding country, FROM = Sea province
on_raid_coast = {
	if = {
		limit = {
			has_faction = pr_buccaneers
		}
		add_faction_influence = {
			faction = pr_buccaneers
			influence = 1
		}
	}
}

# ROOT = Tag that captured the flagship, FROM = Tag that lost the flagship
on_flagship_captured = {
	FROM = {
		set_country_flag = captured_flagship_country_flag
	}
	ROOT = {
		country_event = { id = flagship_events.2 }
		set_country_flag = trophy_hunter_flag
	}
	FROM = {
		country_event = { id = flagship_events.1 }
	}
}

# ROOT = Tag that destroyed the flagship, FROM = Tag that lost the flagship
on_flagship_destroyed = {
	FROM = {
		set_country_flag = sunk_flagship_country_flag
	}
	ROOT = {
		country_event = { id = flagship_events.4 }
	}
	FROM = {
		country_event = { id = flagship_events.3 }
	}
}

# this = Released country, FROM = Releasing country
on_country_released = {
	add_legitimacy = 100
	add_republican_tradition = 100
	add_devotion = 100
	add_horde_unity = 100
	add_meritocracy = 100
	if = {
		limit = {
			religion = taoism
			any_known_country = {
				is_emperor_of_china = yes
				religion = confucianism
			}
		}
		change_religion = confucianism
		add_harmonized_religion = taoism
	}
	if = {
		limit = {
			FROM = {
				is_emperor_of_china = yes
			}
			capital_scope = {
				OR = {
					region = north_china_region
					region = south_china_region
					region = xinan_region
				}
			}
			culture_group = east_asian
		}
		add_government_reform = warring_state
	}
	if = {
		limit = {
			tag = PAP
		}
		change_government = theocracy
		change_religion = catholic
		add_government_reform = papacy_reform
		adopt_reform_progress = FROM
	}
	if = {
		limit = {
			FROM = { has_reform = religious_permanent_revolution_reform }
			NOT = { tag = PAP }
		}
		change_religion = FROM
		adopt_reform_progress = FROM
		add_country_modifier = {
			name = global_holy_war_released_modifier
			duration = 3650
			hidden = yes
		}
		capital_scope = {
			change_religion = FROM
		}
	}
	if = {
		limit = {
			OR = {
				tag = AAC
				tag = BRE
				tag = FRN
				tag = HAM
				tag = MEM
				tag = NUM
				tag = RVA
				tag = ULM
				tag = REG
				tag = ZUR
			}
		}
		change_government = republic
		add_government_reform = oligarchy_reform
		adopt_reform_progress = FROM
	}
	if = {
		limit = {
			tag = AHM
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = BAH
			dynasty = "Bahman"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = BAH
			NOT = {
				dynasty = "Bahman"
			}
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = BID
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = BIJ
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Ilyas Shah"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Siddi"
		}
		set_ruler_culture = siddi
	}
	if = {
		limit = {
			tag = BNG
			dynasty = "Hussein Shah"
		}
		set_ruler_culture = hejazi_culture
	}
	if = {
		limit = {
			tag = BRR
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			dynasty = "Bahman"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = DEC
			was_tag = AHM
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BID
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BIJ
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = DEC
			was_tag = BRR
		}
		set_ruler_culture = kannada
	}
	if = {
		limit = {
			tag = DEC
			was_tag = GOC
		}
		set_ruler_culture = azerbaijani
	}
	if = {
		limit = {
			tag = DEC
			NOT = {
				dynasty = "Bahman"
				was_tag = AHM
				was_tag = BID
				was_tag = BIJ
				was_tag = BRR
			}
		}
		set_ruler_culture = uzbehk
	}
	if = {
		limit = {
			tag = DLH
			NOT = {
				dynasty = "Sharqi"
			}
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = GOC
		}
		set_ruler_culture = azerbaijani
	}
	if = {
		limit = {
			tag = GUJ
			dynasty = "Ahmad Shah"
		}
		set_ruler_culture = panjabi
	}
	if = {
		limit = {
			OR = {
				tag = JNP
				was_tag = JNP
			}
			dynasty = "Sharqi"
		}
		set_ruler_culture = siddi
	}
	if = {
		limit = {
			tag = KHD
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = IRQ
			dynasty = "Qara Qoyunlu"
		}
		set_ruler_culture = azerbaijani
	}
	if = {
		limit = {
			tag = JAJ
		}
		set_ruler_culture = siddi
	}
	if = {
		limit = {
			tag = KLP
		}
		set_ruler_culture = turkish
	}
	if = {
		limit = {
			tag = KRK
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = KRM
			dynasty = "Ghunashirin"
		}
		set_ruler_culture = kanauji
	}
	if = {
		limit = {
			tag = KSH
			dynasty = "Shah Miri"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			is_subject_of = LIT
			dynasty = "Gediminai"
		}
		set_ruler_culture = lithuanian
	}
	if = {
		limit = {
			tag = MLW
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			OR = {
				tag = MUG
				dynasty = "Gurkani"
			}
		}
		set_ruler_culture = uzbehk
	}
	if = {
		limit = {
			tag = MUL
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = ODH
		}
		set_ruler_culture = khorasani
	}
	if = {
		limit = {
			tag = RMP
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = SUR
			dynasty = "Suri"
		}
		set_ruler_culture = afghani
	}
	if = {
		limit = {
			tag = YZD
			dynasty = "Yazdi"
		}
		set_ruler_culture = al_misr_arabic
	}
	if = {
		limit = {
			tag = AKM
		}
		set_dynasty = "Akamatsu"
	}
	if = {
		limit = {
			tag = AMA
		}
		set_dynasty = "Amago"
	}
	if = {
		limit = {
			tag = ASA
		}
		set_dynasty = "Asakura"
	}
	if = {
		limit = {
			tag = ASK
		}
		set_dynasty = "Ashikaga"
	}
	if = {
		limit = {
			tag = CBA
		}
		set_dynasty = "Chiba"
	}
	if = {
		limit = {
			tag = CSK
		}
		set_dynasty = "Chosokabe"
	}
	if = {
		limit = {
			tag = DTE
		}
		set_dynasty = "Date"
	}
	if = {
		limit = {
			tag = HJO
		}
		set_dynasty = "Hojo"
	}
	if = {
		limit = {
			tag = HSK
		}
		set_dynasty = "Hosokawa"
	}
	if = {
		limit = {
			tag = IKE
		}
		set_dynasty = "Ikeda"
	}
	if = {
		limit = {
			tag = IMG
		}
		set_dynasty = "Imagawa"
	}
	if = {
		limit = {
			tag = ISK
		}
		set_dynasty = "Isshiki"
	}
	if = {
		limit = {
			tag = ITO
		}
		set_dynasty = "Ito"
	}
	if = {
		limit = {
			tag = KKC
		}
		set_dynasty = "Kikuchi"
	}
	if = {
		limit = {
			tag = KTB
		}
		set_dynasty = "Kitabatake"
	}
	if = {
		limit = {
			tag = KNO
		}
		set_dynasty = "Kono"
	}
	if = {
		limit = {
			tag = MAE
		}
		set_dynasty = "Maeda"
	}
	if = {
		limit = {
			tag = MRI
		}
		set_dynasty = "Mori"
	}
	if = {
		limit = {
			tag = RFR
		}
		set_dynasty = "Nanbu"
	}
	if = {
		limit = {
			tag = ODA
		}
		set_dynasty = "Oda"
	}
	if = {
		limit = {
			tag = OGS
		}
		set_dynasty = "Ogasawara"
	}
	if = {
		limit = {
			tag = OTM
		}
		set_dynasty = "Otomo"
	}
	if = {
		limit = {
			tag = OUC
		}
		set_dynasty = "Ouchi"
	}
	if = {
		limit = {
			tag = STK
		}
		set_dynasty = "Satake"
	}
	if = {
		limit = {
			tag = SBA
		}
		set_dynasty = "Shiba"
	}
	if = {
		limit = {
			tag = SMZ
		}
		set_dynasty = "Shimazu"
	}
	if = {
		limit = {
			tag = SHN
		}
		set_dynasty = "Shoni"
	}
	if = {
		limit = {
			tag = SOO
		}
		set_dynasty = "So"
	}
	if = {
		limit = {
			tag = TKD
		}
		set_dynasty = "Takeda"
	}
	if = {
		limit = {
			tag = TKI
		}
		set_dynasty = "Toki"
	}
	if = {
		limit = {
			tag = TKG
		}
		set_dynasty = "Tokugawa"
	}
	if = {
		limit = {
			tag = TTI
		}
		set_dynasty = "Tsutsui"
	}
	if = {
		limit = {
			tag = UES
		}
		set_dynasty = "Uesugi"
	}
	if = {
		limit = {
			tag = UTN
		}
		set_dynasty = "Utsunomiya"
	}
	if = {
		limit = {
			tag = YMN
		}
		set_dynasty = "Yamana"
	}
	if = {
		limit = {
			tag = TUR
		}
		set_dynasty = "Osmanoglu"
	}
	if = {
		limit = {
			tag = CND
		}
		set_dynasty = "Candaroglu"
	}
	if = {
		limit = {
			tag = DUL
		}
		set_dynasty = "Dulkadiroglu"
	}
	if = {
		limit = {
			tag = KAR
		}
		set_dynasty = "Karamanoglu"
	}
	if = {
		limit = {
			tag = RAM
		}
		set_dynasty = "Ramazanoglu"
	}
	if = {
		limit = {
			tag = TIM
		}
		set_dynasty = "Gurkani"
	}
	if = {
		limit = {
			tag = SUR
		}
		set_dynasty = "Suri"
	}
	if = {
		limit = {
			tag = ASN
		}
		set_dynasty = "Ashina"
	}
	if = {
		limit = {
			tag = HNM
		}
		set_dynasty = "Honma"
	}
	if = {
		limit = {
			tag = IWA
		}
		set_dynasty = "Iwaki"
	}
	if = {
		limit = {
			tag = KGK
		}
		set_dynasty = "Kyogoku"
	}
	if = {
		limit = {
			tag = KSI
		}
		set_dynasty = "Kasai"
	}
	if = {
		limit = {
			tag = MDR
		}
		set_dynasty = "Matsudaira"
	}
	if = {
		limit = {
			tag = MGM
		}
		set_dynasty = "Mogami"
	}
	if = {
		limit = {
			tag = RKK
		}
		set_dynasty = "Rokkaku"
	}
	if = {
		limit = {
			tag = SGR
		}
		set_dynasty = "Sagara"
	}
	if = {
		limit = {
			tag = SUW
		}
		set_dynasty = "Suwa"
	}
	if = {
		limit = {
			tag = TNA
		}
		set_dynasty = "Tanegashima"
	}
	if = {
		limit = {
			tag = TGI
		}
		set_dynasty = "Togashi"
	}
	if = {
		limit = {
			tag = BAH
		}
		set_dynasty = "Bahmani"
	}
	if = {
		limit = {
			tag = ANO
		}
		set_dynasty = "Asano"
	}
	if = {
		limit = {
			tag = AZI
		}
		set_dynasty = "Azai"
	}
	if = {
		limit = {
			tag = MSU
		}
		set_dynasty = "Matsumae"
	}
	if = {
		limit = {
			tag = MYI
		}
		set_dynasty = "Miyoshi"
	}
	if = {
		limit = {
			tag = STO
		}
		set_dynasty = "Saito"
	}
	if = {
		limit = {
			tag = NIK
		}
		set_dynasty = "Niki"
	}
	if = {
		limit = {
			tag = UKU
		}
		set_dynasty = "Uku"
	}
	if = {
		limit = {
			tag = ICJ
		}
		set_dynasty = "Ichijo"
	}
	if = {
		limit = {
			tag = KMS
		}
		set_dynasty = "Kimotsuki"
	}
	if = {
		limit = {
			tag = STM
		}
		set_dynasty = "Satomi"
	}
	if = {
		limit = {
			tag = JAP
			has_reform = chrysanthemum_throne
		}
		set_dynasty = "Yamato"
	}
	if = {
		limit = {
			tag = DKG
		}
		set_dynasty = "Dukagjini"
	}
	if = {
		limit = {
			tag = KST
		}
		set_dynasty = "Kastrioti"
	}
	if = {
		limit = {
			tag = ARI
		}
		set_dynasty = "Arianiti"
	}
	if = {
		limit = {
			tag = XBT
		}
		set_dynasty = "Muzaka"
	}
}

# ROOT = province, FROM = country
on_trade_good_changed = {
	on_trade_good_changed_estate_privileges_effect = yes
	if = {
		limit = {
			OR = {
				has_province_modifier = wine_bonus_prod
				has_province_modifier = grain_bonus_prod
			}
			FROM = { has_reform = monastic_breweries_reform }
			NOT = { owner = { has_reform = monastic_breweries_reform } }
		}
		remove_province_modifier = wine_bonus_prod
		remove_province_modifier = grain_bonus_prod
	}
	hidden_effect = {
		if = {
			limit = {
				trade_goods = wine
			}
			remove_province_modifier = grain_bonus_prod
			add_province_modifier = { 
				name = wine_bonus_prod
				duration = -1
				hidden = yes
			}
		}
		if = {
			limit = {
				trade_goods = grain
			}
			remove_province_modifier = wine_bonus_prod
			add_province_modifier = { 
				name = grain_bonus_prod
				duration = -1
				hidden = yes
			}
		}
	}
}

# this = country
on_loan_repaid = {
	on_loan_repaid_estate_privileges_effect = yes
}

# this = country
on_rebels_break_country = {
	add_country_modifier = {
		name = just_lost_to_rebels
		duration = 10
		hidden = yes
	}
}

# this = country
## Fires when you fire or replace your ADM advisor, in the moment before they are actually removed from their post.
## Note: Defining a new advisor here will result in the shortest appointment in history. Use on_post_adm_advisor_fired instead :)
on_pre_adm_advisor_fired = {
	if = {
		limit = {
			has_country_flag = need_to_fire_adm_advisor
		}
		set_country_flag = just_fired_adm_advisor
		remove_advisor_by_category_no_action = ADM
	}
}

# this = country
on_pre_dip_advisor_fired = {
	if = {
		limit = {
			has_country_flag = need_to_fire_dip_advisor
		}
		set_country_flag = just_fired_dip_advisor
		remove_advisor_by_category_no_action = DIP
	}
}

# this = country
on_pre_mil_advisor_fired = {
	if = {
		limit = {
			has_country_flag = need_to_fire_mil_advisor
		}
		set_country_flag = just_fired_mil_advisor
		remove_advisor_by_category_no_action = MIL
	}
}

# this = country
on_post_adm_advisor_fired = {

}

# this = country
on_post_dip_advisor_fired = {
	
}

# this = country
on_post_mil_advisor_fired = {
	
}

# this = new client state, from = parent country
on_create_client_state = {

}

# this = new target, from = previous target (both can be non-existent tag)
on_change_revolution_target = {
	if = {
		limit = { has_reform = junior_revolutionary_republic_reform }
		add_government_reform = revolutionary_republic_reform
	}
}

# this = curia controller (enactor of the bull)
on_golden_bull_enacted = {
	set_country_flag = enacted_golden_bull
}


# province:  spawned whenever a new owner takes over the province
# FROM = The previous owner.
on_conquest = {
	remove_named_unrest = estate_land_seized
	clr_province_flag = has_estate_unrest_flag
}

on_country_creation = {
	if = {
		limit = {
			tag = PAP
			OR = {
				NOT = {
					religion = catholic
				}
				NOT = {
					has_reform = papacy_reform
				}
				NOT = {
					government = theocracy
				}
			}
		}
		change_religion = catholic
		change_government = theocracy
		add_government_reform = papacy_reform
	}
	if = {
		limit = {
			is_colonial_nation = yes
			OR = {
				AND = {
					overlord = {
						religion_group = christian
					}
					NOT = {
						religion_group = christian
					}
				}
				AND = {
					overlord = {
						religion_group = muslim
					}
					NOT = {
						religion_group = muslim
					}
				}
				AND = {
					overlord = {
						religion_group = eastern
					}
					NOT = {
						religion_group = eastern
					}
				}
				AND = {
					overlord = {
						religion_group = dharmic
					}
					NOT = {
						religion_group = dharmic
					}
				}
				AND = {
					overlord = {
						religion_group = pagan
					}
					NOT = {
						religion_group = pagan
					}
				}
				AND = {
					overlord = {
						religion_group = mesoamerican_religion_group
					}
					NOT = {
						religion_group = mesoamerican_religion_group
					}
				}
				AND = {
					overlord = {
						religion_group = jewish_group
					}
					NOT = {
						religion_group = jewish_group
					}
				}
				AND = {
					overlord = {
						religion_group = zoroastrian_group
					}
					NOT = {
						religion_group = zoroastrian_group
					}
				}
				AND = {
					overlord = {
						religion_group = druze_group
					}
					NOT = {
						religion_group = druze_group
					}
				}
			}
		}
		if = {
			limit = {
				overlord = {
					religion = catholic
				}
			}
			change_religion = catholic
		}
		if = {
			limit = {
				overlord = {
					religion = anglican
				}
			}
			change_religion = anglican
		}
		if = {
			limit = {
				overlord = {
					religion = hussite
				}
			}
			change_religion = hussite
		}
		if = {
			limit = {
				overlord = {
					religion = protestant
				}
			}
			change_religion = protestant
		}
		if = {
			limit = {
				overlord = {
					religion = reformed
				}
			}
			change_religion = reformed
		}
		if = {
			limit = {
				overlord = {
					religion = orthodox
				}
			}
			change_religion = orthodox
		}
		if = {
			limit = {
				overlord = {
					religion = coptic
				}
			}
			change_religion = coptic
		}
		if = {
			limit = {
				overlord = {
					religion = nestorian
				}
			}
			change_religion = nestorian
		}
		if = {
			limit = {
				overlord = {
					religion = bosnian_christian
				}
			}
			change_religion = bosnian_christian
		}
		if = {
			limit = {
				overlord = {
					religion = sunni
				}
			}
			change_religion = sunni
		}
		if = {
			limit = {
				overlord = {
					religion = shiite
				}
			}
			change_religion = shiite
		}
		if = {
			limit = {
				overlord = {
					religion = ibadi
				}
			}
			change_religion = ibadi
		}
		if = {
			limit = {
				overlord = {
					religion = buddhism
				}
			}
			change_religion = buddhism
		}
		if = {
			limit = {
				overlord = {
					religion = vajrayana
				}
			}
			change_religion = vajrayana
		}
		if = {
			limit = {
				overlord = {
					religion = mahayana
				}
			}
			change_religion = mahayana
		}
		if = {
			limit = {
				overlord = {
					religion = confucianism
				}
			}
			change_religion = shiite
		}
		if = {
			limit = {
				overlord = {
					religion = shinto
				}
			}
			change_religion = shiite
		}
		if = {
			limit = {
				overlord = {
					religion = hinduism
				}
			}
			change_religion = hinduism
		}
		if = {
			limit = {
				overlord = {
					religion = sikhism
				}
			}
			change_religion = sikhism
		}
		if = {
			limit = {
				overlord = {
					religion = animism
				}
			}
			change_religion = animism
		}
		if = {
			limit = {
				overlord = {
					religion = shamanism
				}
			}
			change_religion = shamanism
		}
		if = {
			limit = {
				overlord = {
					religion = totemism
				}
			}
			change_religion = totemism
		}
		if = {
			limit = {
				overlord = {
					religion = inti
				}
			}
			change_religion = inti
		}
		if = {
			limit = {
				overlord = {
					religion = nahuatl
				}
			}
			change_religion = nahuatl
		}
		if = {
			limit = {
				overlord = {
					religion = mesoamerican_religion
				}
			}
			change_religion = mesoamerican_religion
		}
		if = {
			limit = {
				overlord = {
					religion = mixtec_religion
				}
			}
			change_religion = mixtec_religion
		}
		if = {
			limit = {
				overlord = {
					religion = purepecha_religion
				}
			}
			change_religion = purepecha_religion
		}
		if = {
			limit = {
				overlord = {
					religion = zapotec_religion
				}
			}
			change_religion = zapotec_religion
		}
		if = {
			limit = {
				overlord = {
					religion = tengri_pagan_reformed
				}
			}
			change_religion = tengri_pagan_reformed
		}
		if = {
			limit = {
				overlord = {
					religion = jewish
				}
			}
			change_religion = jewish
		}
		if = {
			limit = {
				overlord = {
					religion = zoroastrian
				}
			}
			change_religion = zoroastrian
		}
		if = {
			limit = {
				overlord = {
					religion = yazidi
				}
			}
			change_religion = yazidi
		}
		if = {
			limit = {
				overlord = {
					religion = druze
				}
			}
			change_religion = druze
		}
	}
}

on_federation_leader_change = {
	if = {
		limit = { tag = FROM }
		disband_federation = THIS
	}
	else = {
		# New strongest member becomes the new federation leader
		set_federation_leader = THIS
	}
}

#FROM = country pillaged, ROOT = country doing the pillaging
on_pillaged_capital = {
}

#FROM = country dev was transferred from, ROOT = country doing the transferring
on_transfer_development = {
}

on_colonial_type_change = {
}

on_estate_led_regency = {
}

on_estate_led_regency_surpassed = {
	if = {
		limit = {
			num_of_powerful_estates = 1
			has_estate_led_regency = {
				estate = any
			}
			NOT = {
				estate_led_regency_influence = 70
			}
			OR = {
				AND = {
					has_estate_led_regency = {
						estate = estate_burghers
					}
					NOT = {
						has_estate_loyalty_modifier = {
							estate = estate_church
							modifier = REFUSED_REGENCY
						}
					}
					NOT = {
						has_estate_loyalty_modifier = {
							estate = estate_nobles
							modifier = REFUSED_REGENCY
						}
					}
				}
				AND = {
					has_estate_led_regency = {
						estate = estate_church
					}
					NOT = {
						has_estate_loyalty_modifier = {
							estate = estate_burghers
							modifier = REFUSED_REGENCY
						}
					}
					NOT = {
						has_estate_loyalty_modifier = {
							estate = estate_nobles
							modifier = REFUSED_REGENCY
						}
					}
				}
				AND = {
					has_estate_led_regency = {
						estate = estate_nobles
					}
					NOT = {
						has_estate_loyalty_modifier = {
							estate = estate_burghers
							modifier = REFUSED_REGENCY
						}
					}
					NOT = {
						has_estate_loyalty_modifier = {
							estate = estate_church
							modifier = REFUSED_REGENCY
						}
					}
				}
			}
		}
		country_event = { id = estate_regency_events.1 }
	}
}

on_extended_regency = {
	random_events = {
		100 = extended_regency_events.4
		100 = extended_regency_events.5
		100 = extended_regency_events.6
		
		300 = 0
	}
}

on_estate_removed = {
	if = {
		limit = {
			has_country_modifier = dhimmi_building_restrictions
			NOT = {
				has_estate = estate_dhimmi
			}
		}
		remove_country_modifier = dhimmi_building_restrictions
	}
}

on_colonist_boosting_colony = {
	hidden_effect = {
		if = {
			limit = {
				OR = {
					religion = noreligion
					#test if colonists outnumber natives
					variable_arithmetic_trigger = {
						custom_tooltip = colonysize_is_larger_than_nativesize_tt
						export_to_variable = {
							which = vab_colonysize
							value = trigger_value:colonysize
						}
						export_to_variable = {
							which = vab_nativesize
							value = trigger_value:native_size
						}
						multiply_variable = {
							which = vab_nativesize
							value = 100
						}
						check_variable = {
							which = vab_colonysize
							which = vab_nativesize
						}
					}
					is_in_capital_area = yes
					OR = {
						continent = north_america
						continent = south_america
						continent = new_world
					}
					NOT = {
						OR = {
							has_dlc = "Dharma"
							has_dlc = "Wealth of Nations"
						}
					}
				}
			}
			change_religion = FROM
		}
		if = {
			limit = {
				OR = {
					culture = noculture
					#test if colonists outnumber natives
					variable_arithmetic_trigger = {
						custom_tooltip = colonysize_is_larger_than_nativesize_tt
						export_to_variable = {
							which = vab_colonysize
							value = trigger_value:colonysize
						}
						export_to_variable = {
							which = vab_nativesize
							value = trigger_value:native_size
						}
						multiply_variable = {
							which = vab_nativesize
							value = 100
						}
						check_variable = {
							which = vab_colonysize
							which = vab_nativesize
						}
					}
					is_in_capital_area = yes
					OR = {
						continent = north_america
						continent = south_america
						continent = new_world
					}
					NOT = {
						OR = {
							has_dlc = "Dharma"
							has_dlc = "Wealth of Nations"
						}
					}
				}
			}
			change_culture = FROM
			change_original_culture = FROM
		}
	}
}

#ROOT = converted country, FROM = country which force converts ROOT, on_action gets called on Force religion peace and Enforce Religion subject interaction
on_force_conversion = {
	#if = {	#Commented out for now because Catholicism has received a lot of buffs already.
	#	limit = {
	#		FROM = { religion = catholic }
	#	}
	#	if = {
	#		limit = { ROOT = { government_rank = 3 } }
	#		FROM = { add_papal_influence = 20 }
	#	}
	#	else_if = {
	#		limit = { ROOT = { government_rank = 2 } }
	#		FROM = { add_papal_influence = 10 }
	#	}
	#	else = {
	#		FROM = { add_papal_influence = 5 }
	#	}
	#}
}